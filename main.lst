GAS LISTING /tmp/ccwyvPfy.s 			page 1


   1               		.file	"main.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/home/jon/prog/c/avr/ledmatrixtoy/",100,0,2,.Ltext0
   8               		.stabs	"main.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  18               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  19               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  20               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  21               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  22               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  23               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  24               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  25               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"void:t(0,15)=(0,15)",128,0,0,0
  27               		.stabs	"/usr/lib/gcc/avr/4.7.0/../../../avr/include/avr/io.h",130,0,0,0
  28               		.stabs	"/usr/lib/gcc/avr/4.7.0/../../../avr/include/avr/sfr_defs.h",130,0,0,0
  29               		.stabs	"/usr/lib/gcc/avr/4.7.0/../../../avr/include/inttypes.h",130,0,0,0
  30               		.stabs	"/usr/lib/gcc/avr/4.7.0/include/stdint.h",130,0,0,0
  31               		.stabs	"/usr/lib/gcc/avr/4.7.0/../../../avr/include/stdint.h",130,0,0,0
  32               		.stabs	"int8_t:t(5,1)=(0,10)",128,0,121,0
  33               		.stabs	"uint8_t:t(5,2)=(0,11)",128,0,122,0
  34               		.stabs	"int16_t:t(5,3)=(0,1)",128,0,123,0
  35               		.stabs	"uint16_t:t(5,4)=(0,4)",128,0,124,0
  36               		.stabs	"int32_t:t(5,5)=(0,3)",128,0,125,0
  37               		.stabs	"uint32_t:t(5,6)=(0,5)",128,0,126,0
  38               		.stabs	"int64_t:t(5,7)=(0,6)",128,0,128,0
  39               		.stabs	"uint64_t:t(5,8)=(0,7)",128,0,129,0
  40               		.stabs	"intptr_t:t(5,9)=(5,3)",128,0,142,0
  41               		.stabs	"uintptr_t:t(5,10)=(5,4)",128,0,147,0
  42               		.stabs	"int_least8_t:t(5,11)=(5,1)",128,0,159,0
  43               		.stabs	"uint_least8_t:t(5,12)=(5,2)",128,0,164,0
  44               		.stabs	"int_least16_t:t(5,13)=(5,3)",128,0,169,0
  45               		.stabs	"uint_least16_t:t(5,14)=(5,4)",128,0,174,0
  46               		.stabs	"int_least32_t:t(5,15)=(5,5)",128,0,179,0
  47               		.stabs	"uint_least32_t:t(5,16)=(5,6)",128,0,184,0
  48               		.stabs	"int_least64_t:t(5,17)=(5,7)",128,0,192,0
  49               		.stabs	"uint_least64_t:t(5,18)=(5,8)",128,0,199,0
  50               		.stabs	"int_fast8_t:t(5,19)=(5,1)",128,0,213,0
  51               		.stabs	"uint_fast8_t:t(5,20)=(5,2)",128,0,218,0
  52               		.stabs	"int_fast16_t:t(5,21)=(5,3)",128,0,223,0
  53               		.stabs	"uint_fast16_t:t(5,22)=(5,4)",128,0,228,0
  54               		.stabs	"int_fast32_t:t(5,23)=(5,5)",128,0,233,0
  55               		.stabs	"uint_fast32_t:t(5,24)=(5,6)",128,0,238,0
  56               		.stabs	"int_fast64_t:t(5,25)=(5,7)",128,0,246,0
  57               		.stabs	"uint_fast64_t:t(5,26)=(5,8)",128,0,253,0
GAS LISTING /tmp/ccwyvPfy.s 			page 2


  58               		.stabs	"intmax_t:t(5,27)=(5,7)",128,0,273,0
  59               		.stabs	"uintmax_t:t(5,28)=(5,8)",128,0,278,0
  60               		.stabn	162,0,0,0
  61               		.stabn	162,0,0,0
  62               		.stabs	"int_farptr_t:t(3,1)=(5,5)",128,0,77,0
  63               		.stabs	"uint_farptr_t:t(3,2)=(5,6)",128,0,81,0
  64               		.stabn	162,0,0,0
  65               		.stabn	162,0,0,0
  66               		.stabs	"/usr/lib/gcc/avr/4.7.0/../../../avr/include/avr/fuse.h",130,0,0,0
  67               		.stabs	"__fuse_t:t(6,1)=(6,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,244,0
  68               		.stabn	162,0,0,0
  69               		.stabn	162,0,0,0
  70               		.stabs	"/usr/lib/gcc/avr/4.7.0/../../../avr/include/stdio.h",130,0,0,0
  71               		.stabs	"/usr/lib/gcc/avr/4.7.0/include/stdarg.h",130,0,0,0
  72               		.stabs	"__gnuc_va_list:t(8,1)=(8,2)=*(0,15)",128,0,40,0
  73               		.stabs	"va_list:t(8,3)=(8,1)",128,0,102,0
  74               		.stabn	162,0,0,0
  75               		.stabs	"/usr/lib/gcc/avr/4.7.0/include/stddef.h",130,0,0,0
  76               		.stabs	"size_t:t(9,1)=(0,4)",128,0,213,0
  77               		.stabn	162,0,0,0
  78               		.stabs	"__file:T(7,1)=s14buf:(7,2)=*(0,2),0,16;unget:(0,11),16,8;flags:(5,2),24,8;size:(0,1),32,16
  79               		.stabn	162,0,0,0
  80               		.stabs	"/usr/lib/gcc/avr/4.7.0/../../../avr/include/avr/power.h",130,0,0,0
  81               		.stabs	" :T(10,1)=@s8;eclock_div_1:0,clock_div_2:1,clock_div_4:2,clock_div_8:3,clock_div_16:4,cloc
  82               		.stabs	"clock_div_t:t(10,2)=(10,1)",128,0,1478,0
  83               		.stabn	162,0,0,0
  84               		.stabs	" :T(0,16)=@s8;eBOUNCER:0,SMILEY:1,SINE:2,SINECIRCLE:3,;",128,0,0,0
  85               		.stabs	"erase_screen:F(0,15)",36,0,195,erase_screen
  86               		.stabs	"val:P(5,4)",64,0,195,24
  87               	.global	erase_screen
  88               		.type	erase_screen, @function
  89               	erase_screen:
  90               		.stabd	46,0,0
   1:main.c        **** /*
   2:main.c        **** Author : Jonathan Whitten
   3:main.c        **** Date : 24 AUG 2012
   4:main.c        **** Title : Motor Driver
   5:main.c        **** Description : The motor driver program executes a simple up-down linear actuator, which should neve
   6:main.c        **** 
   7:main.c        **** */
   8:main.c        **** #include <avr/io.h>
   9:main.c        **** #include <avr/sleep.h>
  10:main.c        **** #include <stdio.h>
  11:main.c        **** #include <avr/power.h>
  12:main.c        **** #include <avr/interrupt.h>
  13:main.c        **** 
  14:main.c        **** #define F_CPU 1000000
  15:main.c        **** #include <util/delay.h>
  16:main.c        **** 
  17:main.c        **** #define TIMER_MAX_VALUE 65535
  18:main.c        **** #define BS(bitnum) (1<<bitnum)
  19:main.c        **** #define NOT(val) (val^0xFF)
  20:main.c        **** 
  21:main.c        **** #define data 0
  22:main.c        **** #define shift 1
  23:main.c        **** #define latch 2
  24:main.c        **** #define enable1 3
GAS LISTING /tmp/ccwyvPfy.s 			page 3


  25:main.c        **** #define enable2 4
  26:main.c        **** #define reset 5
  27:main.c        **** 
  28:main.c        **** enum{
  29:main.c        ****     BOUNCER = 0,
  30:main.c        ****     SMILEY,
  31:main.c        ****     SINE,
  32:main.c        ****     SINECIRCLE
  33:main.c        **** };
  34:main.c        **** 
  35:main.c        **** //Universal variables
  36:main.c        **** uint8_t state;
  37:main.c        **** uint16_t statetimer;
  38:main.c        **** uint16_t matrix[8][8];
  39:main.c        **** uint8_t inttimer;
  40:main.c        **** uint16_t maxtimer;
  41:main.c        **** uint16_t delay;
  42:main.c        **** 
  43:main.c        **** //Bouncer variables
  44:main.c        **** uint8_t posx;
  45:main.c        **** uint8_t posy;
  46:main.c        **** uint8_t dirx;
  47:main.c        **** uint8_t diry;
  48:main.c        **** uint16_t wallbrightness;
  49:main.c        **** 
  50:main.c        **** //sinecircle variables
  51:main.c        **** uint8_t radius;
  52:main.c        **** 
  53:main.c        **** //sine variables
  54:main.c        **** uint8_t sinecounter;
  55:main.c        **** 
  56:main.c        **** //Smileyface map
  57:main.c        **** uint8_t smileymap[8] = {
  58:main.c        ****     0b00111100,
  59:main.c        ****     0b01000010,
  60:main.c        ****     0b10100101,
  61:main.c        ****     0b10000001,
  62:main.c        ****     0b10100101,
  63:main.c        ****     0b10011001,
  64:main.c        ****     0b01000010,
  65:main.c        ****     0b00111100
  66:main.c        **** };
  67:main.c        **** 
  68:main.c        **** //Sinemap
  69:main.c        **** uint32_t sinemap[8] = {
  70:main.c        ****     0b1111000000000000000000000000,
  71:main.c        ****     0b0000110000000000000000000011,
  72:main.c        ****     0b0000001100000000000000001100,
  73:main.c        ****     0b0000000010000000000000010000,
  74:main.c        ****     0b0000000001000000000000100000,
  75:main.c        ****     0b0000000000110000000011000000,
  76:main.c        ****     0b0000000000001100001100000000,
  77:main.c        ****     0b0000000000000011110000000000
  78:main.c        **** };
  79:main.c        **** 
  80:main.c        **** 
  81:main.c        **** uint8_t sinecirclemap[11][8] = {
GAS LISTING /tmp/ccwyvPfy.s 			page 4


  82:main.c        **** {
  83:main.c        ****     0b00000000,
  84:main.c        ****     0b00000000,
  85:main.c        ****     0b00000000,
  86:main.c        ****     0b00000000,
  87:main.c        ****     0b00000000,
  88:main.c        ****     0b00000000,
  89:main.c        ****     0b00000000,
  90:main.c        ****     0b00000000
  91:main.c        **** },
  92:main.c        **** {
  93:main.c        ****     0b00000000,
  94:main.c        ****     0b00000000,
  95:main.c        ****     0b00000000,
  96:main.c        ****     0b00000000,
  97:main.c        ****     0b00000000,
  98:main.c        ****     0b00000000,
  99:main.c        ****     0b00000000,
 100:main.c        ****     0b00000000
 101:main.c        **** },
 102:main.c        **** {
 103:main.c        ****     0b00000000,
 104:main.c        ****     0b00000000,
 105:main.c        ****     0b00000000,
 106:main.c        ****     0b00000000,
 107:main.c        ****     0b00000000,
 108:main.c        ****     0b00000000,
 109:main.c        ****     0b00000000,
 110:main.c        ****     0b00000000
 111:main.c        **** },
 112:main.c        **** {
 113:main.c        ****     0b00000000,
 114:main.c        ****     0b00000000,
 115:main.c        ****     0b00000000,
 116:main.c        ****     0b00010000,
 117:main.c        ****     0b00000000,
 118:main.c        ****     0b00000000,
 119:main.c        ****     0b00000000,
 120:main.c        ****     0b00000000
 121:main.c        **** 
 122:main.c        **** },
 123:main.c        **** {
 124:main.c        ****     0b00000000,
 125:main.c        ****     0b00000000,
 126:main.c        ****     0b00000000,
 127:main.c        ****     0b00011000,
 128:main.c        ****     0b00011000,
 129:main.c        ****     0b00000000,
 130:main.c        ****     0b00000000,
 131:main.c        ****     0b00000000
 132:main.c        **** },
 133:main.c        **** {
 134:main.c        ****     0b00000000,
 135:main.c        ****     0b00000000,
 136:main.c        ****     0b00011000,
 137:main.c        ****     0b00100100,
 138:main.c        ****     0b00100100,
GAS LISTING /tmp/ccwyvPfy.s 			page 5


 139:main.c        ****     0b00011000,
 140:main.c        ****     0b00000000,
 141:main.c        ****     0b00000000
 142:main.c        **** },
 143:main.c        **** {
 144:main.c        ****     0b00000000,
 145:main.c        ****     0b00100100,
 146:main.c        ****     0b01100110,
 147:main.c        ****     0b00000000,
 148:main.c        ****     0b00000000,
 149:main.c        ****     0b01100110,
 150:main.c        ****     0b00100100,
 151:main.c        ****     0b00000000
 152:main.c        **** },
 153:main.c        **** {
 154:main.c        ****     0b00000000,
 155:main.c        ****     0b00011000,
 156:main.c        ****     0b00000000,
 157:main.c        ****     0b01000010,
 158:main.c        ****     0b01000010,
 159:main.c        ****     0b00000000,
 160:main.c        ****     0b00011000,
 161:main.c        ****     0b00000000
 162:main.c        **** },
 163:main.c        **** {
 164:main.c        ****     0b00100100,
 165:main.c        ****     0b01000010,
 166:main.c        ****     0b10000001,
 167:main.c        ****     0b00000000,
 168:main.c        ****     0b00000000,
 169:main.c        ****     0b10000001,
 170:main.c        ****     0b01000010,
 171:main.c        ****     0b00100100
 172:main.c        **** },
 173:main.c        **** {
 174:main.c        ****     0b11000011,
 175:main.c        ****     0b10000001,
 176:main.c        ****     0b00000000,
 177:main.c        ****     0b00000000,
 178:main.c        ****     0b00000000,
 179:main.c        ****     0b00000000,
 180:main.c        ****     0b10000001,
 181:main.c        ****     0b11000011
 182:main.c        **** },
 183:main.c        **** {
 184:main.c        ****     0b00011000,
 185:main.c        ****     0b00000000,
 186:main.c        ****     0b00000000,
 187:main.c        ****     0b10000001,
 188:main.c        ****     0b10000001,
 189:main.c        ****     0b00000000,
 190:main.c        ****     0b00000000,
 191:main.c        ****     0b00011000
 192:main.c        **** }};
 193:main.c        **** 
 194:main.c        **** 
 195:main.c        **** void erase_screen(uint16_t val)
GAS LISTING /tmp/ccwyvPfy.s 			page 6


 196:main.c        **** {
  91               		.stabn	68,0,196,.LM0-.LFBB1
  92               	.LM0:
  93               	.LFBB1:
  94               	/* prologue: function */
  95               	/* frame size = 0 */
  96               	/* stack size = 0 */
  97               	.L__stack_usage = 0
  98 0000 E0E0      		ldi r30,lo8(matrix)
  99 0002 F0E0      		ldi r31,hi8(matrix)
 100               	.L2:
 197:main.c        ****   int i=0,j =0;
 198:main.c        ****   for(i=0;i<8;i++)
 199:main.c        ****   {
 200:main.c        ****     for(j=0;j<8;j++)
 201:main.c        ****     {
 202:main.c        ****       matrix[i][j] = val;
 101               		.stabn	68,0,202,.LM1-.LFBB1
 102               	.LM1:
 103 0004 9183      		std Z+1,r25
 104 0006 8083      		st Z,r24
 105 0008 9383      		std Z+3,r25
 106 000a 8283      		std Z+2,r24
 107 000c 9583      		std Z+5,r25
 108 000e 8483      		std Z+4,r24
 109 0010 9783      		std Z+7,r25
 110 0012 8683      		std Z+6,r24
 111 0014 9187      		std Z+9,r25
 112 0016 8087      		std Z+8,r24
 113 0018 9387      		std Z+11,r25
 114 001a 8287      		std Z+10,r24
 115 001c 9587      		std Z+13,r25
 116 001e 8487      		std Z+12,r24
 117 0020 9787      		std Z+15,r25
 118 0022 8687      		std Z+14,r24
 119 0024 7096      		adiw r30,16
 198:main.c        ****   for(i=0;i<8;i++)
 120               		.stabn	68,0,198,.LM2-.LFBB1
 121               	.LM2:
 122 0026 20E0      		ldi r18,hi8(matrix+128)
 123 0028 E030      		cpi r30,lo8(matrix+128)
 124 002a F207      		cpc r31,r18
 125 002c 01F4      		brne .L2
 126               	/* epilogue start */
 203:main.c        ****     }
 204:main.c        ****   }
 205:main.c        **** }//end erase screen
 127               		.stabn	68,0,205,.LM3-.LFBB1
 128               	.LM3:
 129 002e 0895      		ret
 130               		.size	erase_screen, .-erase_screen
 131               	.Lscope1:
 132               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 133               		.stabd	78,0,0
 134               		.stabs	"copy_image:F(0,15)",36,0,207,copy_image
 135               		.stabs	"color:P(5,4)",64,0,207,22
 136               	.global	copy_image
GAS LISTING /tmp/ccwyvPfy.s 			page 7


 137               		.type	copy_image, @function
 138               	copy_image:
 139               		.stabd	46,0,0
 206:main.c        **** 
 207:main.c        **** void copy_image(uint8_t img[8], uint16_t color)
 208:main.c        **** {
 140               		.stabn	68,0,208,.LM4-.LFBB2
 141               	.LM4:
 142               	.LFBB2:
 143 0030 EF92      		push r14
 144 0032 FF92      		push r15
 145 0034 0F93      		push r16
 146 0036 1F93      		push r17
 147 0038 CF93      		push r28
 148 003a DF93      		push r29
 149               	/* prologue: function */
 150               	/* frame size = 0 */
 151               	/* stack size = 6 */
 152               	.L__stack_usage = 6
 153 003c A0E0      		ldi r26,lo8(matrix)
 154 003e B0E0      		ldi r27,hi8(matrix)
 209:main.c        ****     uint8_t i,j;
 210:main.c        ****     for(i=0;i<8;i++)
 211:main.c        ****         for(j=0;j<8;j++)
 212:main.c        ****         {
 213:main.c        ****             if( ((img[j]>>i)&0x1) == 0x1)
 155               		.stabn	68,0,213,.LM5-.LFBB2
 156               	.LM5:
 157 0040 40E0      		ldi r20,0
 158 0042 50E0      		ldi r21,0
 159 0044 EE24      		clr r14
 160 0046 E394      		inc r14
 161 0048 F12C      		mov r15,__zero_reg__
 162 004a 00C0      		rjmp .L5
 163               	.L7:
 164 004c C191      		ld r28,Z+
 165 004e D0E0      		ldi r29,0
 166 0050 C023      		and r28,r16
 167 0052 D123      		and r29,r17
 168 0054 CD2B      		or r28,r29
 169 0056 01F0      		breq .L6
 207:main.c        **** void copy_image(uint8_t img[8], uint16_t color)
 170               		.stabn	68,0,207,.LM6-.LFBB2
 171               	.LM6:
 172 0058 ED01      		movw r28,r26
 173 005a C20F      		add r28,r18
 174 005c D31F      		adc r29,r19
 214:main.c        ****                 matrix[j][i] = color;
 175               		.stabn	68,0,214,.LM7-.LFBB2
 176               	.LM7:
 177 005e 7983      		std Y+1,r23
 178 0060 6883      		st Y,r22
 179               	.L6:
 180 0062 205F      		subi r18,-16
 181 0064 3F4F      		sbci r19,-1
 211:main.c        ****         for(j=0;j<8;j++)
 182               		.stabn	68,0,211,.LM8-.LFBB2
GAS LISTING /tmp/ccwyvPfy.s 			page 8


 183               	.LM8:
 184 0066 2038      		cpi r18,-128
 185 0068 3105      		cpc r19,__zero_reg__
 186 006a 01F4      		brne .L7
 187 006c 4F5F      		subi r20,-1
 188 006e 5F4F      		sbci r21,-1
 189 0070 1296      		adiw r26,2
 210:main.c        ****     for(i=0;i<8;i++)
 190               		.stabn	68,0,210,.LM9-.LFBB2
 191               	.LM9:
 192 0072 4830      		cpi r20,8
 193 0074 5105      		cpc r21,__zero_reg__
 194 0076 01F0      		breq .L4
 195               	.L5:
 196 0078 8701      		movw r16,r14
 197 007a 042E      		mov r0,r20
 198 007c 00C0      		rjmp 2f
 199               		1:
 200 007e 000F      		lsl r16
 201 0080 111F      		rol r17
 202               		2:
 203 0082 0A94      		dec r0
 204 0084 02F4      		brpl 1b
 205 0086 FC01      		movw r30,r24
 213:main.c        ****             if( ((img[j]>>i)&0x1) == 0x1)
 206               		.stabn	68,0,213,.LM10-.LFBB2
 207               	.LM10:
 208 0088 20E0      		ldi r18,0
 209 008a 30E0      		ldi r19,0
 210 008c 00C0      		rjmp .L7
 211               	.L4:
 212               	/* epilogue start */
 215:main.c        ****         }
 216:main.c        **** }
 213               		.stabn	68,0,216,.LM11-.LFBB2
 214               	.LM11:
 215 008e DF91      		pop r29
 216 0090 CF91      		pop r28
 217 0092 1F91      		pop r17
 218 0094 0F91      		pop r16
 219 0096 FF90      		pop r15
 220 0098 EF90      		pop r14
 221 009a 0895      		ret
 222               		.size	copy_image, .-copy_image
 223               	.Lscope2:
 224               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 225               		.stabd	78,0,0
 226               		.stabs	"draw_circle:F(0,15)",36,0,218,draw_circle
 227               		.stabs	"radius:P(5,2)",64,0,218,24
 228               		.stabs	"color:P(5,4)",64,0,218,22
 229               	.global	draw_circle
 230               		.type	draw_circle, @function
 231               	draw_circle:
 232               		.stabd	46,0,0
 217:main.c        **** 
 218:main.c        **** void draw_circle(uint8_t radius, uint16_t color)
 219:main.c        **** {
GAS LISTING /tmp/ccwyvPfy.s 			page 9


 233               		.stabn	68,0,219,.LM12-.LFBB3
 234               	.LM12:
 235               	.LFBB3:
 236 009c AF92      		push r10
 237 009e BF92      		push r11
 238 00a0 CF92      		push r12
 239 00a2 DF92      		push r13
 240 00a4 EF92      		push r14
 241 00a6 FF92      		push r15
 242 00a8 0F93      		push r16
 243 00aa 1F93      		push r17
 244 00ac CF93      		push r28
 245 00ae DF93      		push r29
 246 00b0 CDB7      		in r28,__SP_L__
 247 00b2 DEB7      		in r29,__SP_H__
 248 00b4 2897      		sbiw r28,8
 249 00b6 0FB6      		in __tmp_reg__,__SREG__
 250 00b8 F894      		cli
 251 00ba DEBF      		out __SP_H__,r29
 252 00bc 0FBE      		out __SREG__,__tmp_reg__
 253 00be CDBF      		out __SP_L__,r28
 254               	/* prologue: function */
 255               	/* frame size = 8 */
 256               	/* stack size = 18 */
 257               	.L__stack_usage = 18
 220:main.c        ****     uint16_t colors[4];
 221:main.c        ****     colors[3] = color;
 258               		.stabn	68,0,221,.LM13-.LFBB3
 259               	.LM13:
 260 00c0 7887      		std Y+8,r23
 261 00c2 6F83      		std Y+7,r22
 222:main.c        ****     colors[2] = color - 0x3333;
 262               		.stabn	68,0,222,.LM14-.LFBB3
 263               	.LM14:
 264 00c4 9B01      		movw r18,r22
 265 00c6 2353      		subi r18,51
 266 00c8 3343      		sbci r19,51
 267 00ca 3E83      		std Y+6,r19
 268 00cc 2D83      		std Y+5,r18
 223:main.c        ****     colors[1] = color - 0x6666;
 269               		.stabn	68,0,223,.LM15-.LFBB3
 270               	.LM15:
 271 00ce 9B01      		movw r18,r22
 272 00d0 2656      		subi r18,102
 273 00d2 3646      		sbci r19,102
 274 00d4 3C83      		std Y+4,r19
 275 00d6 2B83      		std Y+3,r18
 224:main.c        ****     colors[0] = color - 0x9999;
 276               		.stabn	68,0,224,.LM16-.LFBB3
 277               	.LM16:
 278 00d8 6959      		subi r22,-103
 279 00da 7949      		sbci r23,-103
 280 00dc 7A83      		std Y+2,r23
 281 00de 6983      		std Y+1,r22
 282 00e0 EE24      		clr r14
 283 00e2 E394      		inc r14
 284 00e4 F12C      		mov r15,__zero_reg__
GAS LISTING /tmp/ccwyvPfy.s 			page 10


 285 00e6 EC0E      		add r14,r28
 286 00e8 FD1E      		adc r15,r29
 287 00ea 00E0      		ldi r16,0
 288 00ec 10E0      		ldi r17,0
 218:main.c        **** void draw_circle(uint8_t radius, uint16_t color)
 289               		.stabn	68,0,218,.LM17-.LFBB3
 290               	.LM17:
 291 00ee A82E      		mov r10,r24
 292 00f0 B12C      		mov r11,__zero_reg__
 225:main.c        **** 
 226:main.c        ****     uint8_t i;
 227:main.c        ****     for(i=0;i<4;i++)
 228:main.c        ****     {
 229:main.c        ****         copy_image(sinecirclemap[ (i+radius)%11 ], colors[i]); 
 293               		.stabn	68,0,229,.LM18-.LFBB3
 294               	.LM18:
 295 00f2 6BE0      		ldi r22,lo8(11)
 296 00f4 C62E      		mov r12,r22
 297 00f6 D12C      		mov r13,__zero_reg__
 298               	.L14:
 299               		.stabn	68,0,229,.LM19-.LFBB3
 300               	.LM19:
 301 00f8 F701      		movw r30,r14
 302 00fa 2191      		ld r18,Z+
 303 00fc 3191      		ld r19,Z+
 304 00fe 7F01      		movw r14,r30
 218:main.c        **** void draw_circle(uint8_t radius, uint16_t color)
 305               		.stabn	68,0,218,.LM20-.LFBB3
 306               	.LM20:
 307 0100 C801      		movw r24,r16
 308 0102 8A0D      		add r24,r10
 309 0104 9B1D      		adc r25,r11
 310               		.stabn	68,0,229,.LM21-.LFBB3
 311               	.LM21:
 312 0106 B601      		movw r22,r12
 313 0108 00D0      		rcall __divmodhi4
 314 010a 43E0      		ldi r20,3
 315               		1:
 316 010c 880F      		lsl r24
 317 010e 991F      		rol r25
 318 0110 4A95      		dec r20
 319 0112 01F4      		brne 1b
 320 0114 B901      		movw r22,r18
 321 0116 8050      		subi r24,lo8(-(sinecirclemap))
 322 0118 9040      		sbci r25,hi8(-(sinecirclemap))
 323 011a 00D0      		rcall copy_image
 324 011c 0F5F      		subi r16,-1
 325 011e 1F4F      		sbci r17,-1
 227:main.c        ****     for(i=0;i<4;i++)
 326               		.stabn	68,0,227,.LM22-.LFBB3
 327               	.LM22:
 328 0120 0430      		cpi r16,4
 329 0122 1105      		cpc r17,__zero_reg__
 330 0124 01F4      		brne .L14
 331               	/* epilogue start */
 230:main.c        ****     }
 231:main.c        **** 
GAS LISTING /tmp/ccwyvPfy.s 			page 11


 232:main.c        ****     /*
 233:main.c        ****     //draw up to radius
 234:main.c        ****     if(radius<5)
 235:main.c        ****     {
 236:main.c        ****         start = 0;
 237:main.c        ****         stop = radius;
 238:main.c        ****     }
 239:main.c        ****     else if(radius > 8)
 240:main.c        ****     {
 241:main.c        ****         start = radius-4;
 242:main.c        ****         stop = 9;
 243:main.c        ****     }
 244:main.c        ****     else{
 245:main.c        ****         start = radius-4;
 246:main.c        ****         stop = radius;
 247:main.c        ****     }
 248:main.c        ****         
 249:main.c        ****     //draw radius
 250:main.c        ****     uint8_t cnt = stop-start;
 251:main.c        ****     for(i=start;i<stop;i++)
 252:main.c        ****     {
 253:main.c        ****         copy_image((sinecirclemap[i]), colors[cnt]);
 254:main.c        ****         cnt--;
 255:main.c        ****     }
 256:main.c        ****     */
 257:main.c        **** }
 332               		.stabn	68,0,257,.LM23-.LFBB3
 333               	.LM23:
 334 0126 2896      		adiw r28,8
 335 0128 0FB6      		in __tmp_reg__,__SREG__
 336 012a F894      		cli
 337 012c DEBF      		out __SP_H__,r29
 338 012e 0FBE      		out __SREG__,__tmp_reg__
 339 0130 CDBF      		out __SP_L__,r28
 340 0132 DF91      		pop r29
 341 0134 CF91      		pop r28
 342 0136 1F91      		pop r17
 343 0138 0F91      		pop r16
 344 013a FF90      		pop r15
 345 013c EF90      		pop r14
 346 013e DF90      		pop r13
 347 0140 CF90      		pop r12
 348 0142 BF90      		pop r11
 349 0144 AF90      		pop r10
 350 0146 0895      		ret
 351               		.size	draw_circle, .-draw_circle
 352               		.stabs	"colors:(0,17)=ar(0,18)=r(0,18);0;0177777;;0;3;(5,4)",128,0,220,1
 353               		.stabn	192,0,0,.LFBB3-.LFBB3
 354               		.stabn	224,0,0,.Lscope3-.LFBB3
 355               	.Lscope3:
 356               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 357               		.stabd	78,0,0
 358               		.stabs	"draw_outline:F(0,15)",36,0,259,draw_outline
 359               	.global	draw_outline
 360               		.type	draw_outline, @function
 361               	draw_outline:
 362               		.stabd	46,0,0
GAS LISTING /tmp/ccwyvPfy.s 			page 12


 258:main.c        **** 
 259:main.c        **** void draw_outline()
 260:main.c        **** {
 363               		.stabn	68,0,260,.LM24-.LFBB4
 364               	.LM24:
 365               	.LFBB4:
 366               	/* prologue: function */
 367               	/* frame size = 0 */
 368               	/* stack size = 0 */
 369               	.L__stack_usage = 0
 261:main.c        ****     int i,j;
 262:main.c        ****     for(i=0;i<8;i++)
 263:main.c        ****     {
 264:main.c        ****       for(j=0;j<8;j++)
 265:main.c        ****       {
 266:main.c        ****         if(i==7 || i==0 || j==7 || j==0)
 267:main.c        ****           matrix[j][i] = wallbrightness;
 370               		.stabn	68,0,267,.LM25-.LFBB4
 371               	.LM25:
 372 0148 E091 0000 		lds r30,wallbrightness
 373 014c F091 0000 		lds r31,wallbrightness+1
 374 0150 60E0      		ldi r22,lo8(matrix)
 375 0152 70E0      		ldi r23,hi8(matrix)
 262:main.c        ****     for(i=0;i<8;i++)
 376               		.stabn	68,0,262,.LM26-.LFBB4
 377               	.LM26:
 378 0154 20E0      		ldi r18,0
 379 0156 30E0      		ldi r19,0
 380 0158 00C0      		rjmp .L17
 381               	.L20:
 266:main.c        ****         if(i==7 || i==0 || j==7 || j==0)
 382               		.stabn	68,0,266,.LM27-.LFBB4
 383               	.LM27:
 384 015a 2730      		cpi r18,7
 385 015c 3105      		cpc r19,__zero_reg__
 386 015e 01F0      		breq .L18
 266:main.c        ****         if(i==7 || i==0 || j==7 || j==0)
 387               		.stabn	68,0,266,.LM28-.LFBB4
 388               	.LM28:
 389 0160 2115      		cp r18,__zero_reg__
 390 0162 3105      		cpc r19,__zero_reg__
 391 0164 01F0      		breq .L18
 392 0166 8730      		cpi r24,7
 393 0168 9105      		cpc r25,__zero_reg__
 394 016a 01F0      		breq .L18
 395 016c 0097      		sbiw r24,0
 396 016e 01F4      		brne .L19
 397               	.L18:
 259:main.c        **** void draw_outline()
 398               		.stabn	68,0,259,.LM29-.LFBB4
 399               	.LM29:
 400 0170 DB01      		movw r26,r22
 401 0172 A40F      		add r26,r20
 402 0174 B51F      		adc r27,r21
 403               		.stabn	68,0,267,.LM30-.LFBB4
 404               	.LM30:
 405 0176 ED93      		st X+,r30
GAS LISTING /tmp/ccwyvPfy.s 			page 13


 406 0178 FC93      		st X,r31
 407               	.L19:
 264:main.c        ****       for(j=0;j<8;j++)
 408               		.stabn	68,0,264,.LM31-.LFBB4
 409               	.LM31:
 410 017a 0196      		adiw r24,1
 411 017c 405F      		subi r20,-16
 412 017e 5F4F      		sbci r21,-1
 413 0180 8830      		cpi r24,8
 414 0182 9105      		cpc r25,__zero_reg__
 415 0184 01F4      		brne .L20
 262:main.c        ****     for(i=0;i<8;i++)
 416               		.stabn	68,0,262,.LM32-.LFBB4
 417               	.LM32:
 418 0186 2F5F      		subi r18,-1
 419 0188 3F4F      		sbci r19,-1
 420 018a 6E5F      		subi r22,-2
 421 018c 7F4F      		sbci r23,-1
 422 018e 2830      		cpi r18,8
 423 0190 3105      		cpc r19,__zero_reg__
 424 0192 01F0      		breq .L16
 425               	.L17:
 260:main.c        **** {
 426               		.stabn	68,0,260,.LM33-.LFBB4
 427               	.LM33:
 428 0194 40E0      		ldi r20,0
 429 0196 50E0      		ldi r21,0
 430 0198 80E0      		ldi r24,0
 431 019a 90E0      		ldi r25,0
 432 019c 00C0      		rjmp .L20
 433               	.L16:
 434 019e 0895      		ret
 435               		.size	draw_outline, .-draw_outline
 436               		.stabs	"i:r(0,1)",64,0,261,18
 437               		.stabs	"j:r(0,1)",64,0,261,24
 438               		.stabn	192,0,0,.LFBB4-.LFBB4
 439               		.stabn	224,0,0,.Lscope4-.LFBB4
 440               	.Lscope4:
 441               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 442               		.stabd	78,0,0
 443               		.stabs	"update_sinecircle:F(0,15)",36,0,272,update_sinecircle
 444               	.global	update_sinecircle
 445               		.type	update_sinecircle, @function
 446               	update_sinecircle:
 447               		.stabd	46,0,0
 268:main.c        ****       }
 269:main.c        ****     }
 270:main.c        **** }
 271:main.c        **** 
 272:main.c        **** void update_sinecircle(){
 448               		.stabn	68,0,272,.LM34-.LFBB5
 449               	.LM34:
 450               	.LFBB5:
 451               	/* prologue: function */
 452               	/* frame size = 0 */
 453               	/* stack size = 0 */
 454               	.L__stack_usage = 0
GAS LISTING /tmp/ccwyvPfy.s 			page 14


 273:main.c        ****     if(radius==10)
 455               		.stabn	68,0,273,.LM35-.LFBB5
 456               	.LM35:
 457 01a0 8091 0000 		lds r24,radius
 458 01a4 8A30      		cpi r24,lo8(10)
 459 01a6 01F4      		brne .L33
 274:main.c        ****         radius = 0;
 460               		.stabn	68,0,274,.LM36-.LFBB5
 461               	.LM36:
 462 01a8 1092 0000 		sts radius,__zero_reg__
 463 01ac 00C0      		rjmp .L34
 464               	.L33:
 275:main.c        ****     else
 276:main.c        ****         radius += 1; 
 465               		.stabn	68,0,276,.LM37-.LFBB5
 466               	.LM37:
 467 01ae 8F5F      		subi r24,lo8(-(1))
 468 01b0 8093 0000 		sts radius,r24
 469               	.L34:
 277:main.c        **** 
 278:main.c        ****     draw_circle(radius, wallbrightness);
 470               		.stabn	68,0,278,.LM38-.LFBB5
 471               	.LM38:
 472 01b4 6091 0000 		lds r22,wallbrightness
 473 01b8 7091 0000 		lds r23,wallbrightness+1
 474 01bc 8091 0000 		lds r24,radius
 475 01c0 00C0      		rjmp draw_circle
 476               		.size	update_sinecircle, .-update_sinecircle
 477               	.Lscope5:
 478               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 479               		.stabd	78,0,0
 480               		.stabs	"update_sine:F(0,15)",36,0,281,update_sine
 481               	.global	update_sine
 482               		.type	update_sine, @function
 483               	update_sine:
 484               		.stabd	46,0,0
 279:main.c        **** }//end update sinecircle
 280:main.c        **** 
 281:main.c        **** void update_sine(){    
 485               		.stabn	68,0,281,.LM39-.LFBB6
 486               	.LM39:
 487               	.LFBB6:
 488 01c2 2F92      		push r2
 489 01c4 3F92      		push r3
 490 01c6 4F92      		push r4
 491 01c8 5F92      		push r5
 492 01ca 6F92      		push r6
 493 01cc 7F92      		push r7
 494 01ce 8F92      		push r8
 495 01d0 9F92      		push r9
 496 01d2 AF92      		push r10
 497 01d4 BF92      		push r11
 498 01d6 CF92      		push r12
 499 01d8 DF92      		push r13
 500 01da EF92      		push r14
 501 01dc FF92      		push r15
 502 01de 0F93      		push r16
GAS LISTING /tmp/ccwyvPfy.s 			page 15


 503 01e0 1F93      		push r17
 504 01e2 CF93      		push r28
 505 01e4 DF93      		push r29
 506               	/* prologue: function */
 507               	/* frame size = 0 */
 508               	/* stack size = 18 */
 509               	.L__stack_usage = 18
 282:main.c        ****     uint8_t i,j,mask;
 283:main.c        ****     for(i=0;i<8;i++)
 284:main.c        ****         for(j=0;j<8;j++)
 285:main.c        ****         {
 286:main.c        ****             mask = (sinecounter+i)%28;
 510               		.stabn	68,0,286,.LM40-.LFBB6
 511               	.LM40:
 512 01e6 A090 0000 		lds r10,sinecounter
 513 01ea B12C      		mov r11,__zero_reg__
 287:main.c        ****             if( ((sinemap[j]>>(mask))&0x01) == 0x01)
 288:main.c        ****                 matrix[j][i] = wallbrightness;
 514               		.stabn	68,0,288,.LM41-.LFBB6
 515               	.LM41:
 516 01ec 4090 0000 		lds r4,wallbrightness
 517 01f0 5090 0000 		lds r5,wallbrightness+1
 518 01f4 C0E0      		ldi r28,lo8(matrix)
 519 01f6 D0E0      		ldi r29,hi8(matrix)
 520 01f8 212C      		mov r2,__zero_reg__
 521 01fa 312C      		mov r3,__zero_reg__
 281:main.c        **** void update_sine(){    
 522               		.stabn	68,0,281,.LM42-.LFBB6
 523               	.LM42:
 524 01fc 3501      		movw r6,r10
 286:main.c        ****             mask = (sinecounter+i)%28;
 525               		.stabn	68,0,286,.LM43-.LFBB6
 526               	.LM43:
 527 01fe 7CE1      		ldi r23,lo8(28)
 528 0200 872E      		mov r8,r23
 529 0202 912C      		mov r9,__zero_reg__
 530 0204 01E0      		ldi r16,lo8(1)
 531 0206 10E0      		ldi r17,0
 532 0208 20E0      		ldi r18,0
 533 020a 30E0      		ldi r19,0
 534 020c 00C0      		rjmp .L36
 535               	.L38:
 287:main.c        ****             if( ((sinemap[j]>>(mask))&0x01) == 0x01)
 536               		.stabn	68,0,287,.LM44-.LFBB6
 537               	.LM44:
 538 020e FC01      		movw r30,r24
 539 0210 4191      		ld r20,Z+
 540 0212 5191      		ld r21,Z+
 541 0214 6191      		ld r22,Z+
 542 0216 7191      		ld r23,Z+
 543 0218 CF01      		movw r24,r30
 544 021a 4C21      		and r20,r12
 545 021c 5D21      		and r21,r13
 546 021e 6E21      		and r22,r14
 547 0220 7F21      		and r23,r15
 548 0222 452B      		or r20,r21
 549 0224 462B      		or r20,r22
GAS LISTING /tmp/ccwyvPfy.s 			page 16


 550 0226 472B      		or r20,r23
 551 0228 01F0      		breq .L37
 281:main.c        **** void update_sine(){    
 552               		.stabn	68,0,281,.LM45-.LFBB6
 553               	.LM45:
 554 022a AE01      		movw r20,r28
 555 022c 4A0F      		add r20,r26
 556 022e 5B1F      		adc r21,r27
 557               		.stabn	68,0,288,.LM46-.LFBB6
 558               	.LM46:
 559 0230 FA01      		movw r30,r20
 560 0232 5182      		std Z+1,r5
 561 0234 4082      		st Z,r4
 562               	.L37:
 563 0236 5096      		adiw r26,16
 284:main.c        ****         for(j=0;j<8;j++)
 564               		.stabn	68,0,284,.LM47-.LFBB6
 565               	.LM47:
 566 0238 A038      		cpi r26,-128
 567 023a B105      		cpc r27,__zero_reg__
 568 023c 01F4      		brne .L38
 569 023e FFEF      		ldi r31,-1
 570 0240 2F1A      		sub r2,r31
 571 0242 3F0A      		sbc r3,r31
 572 0244 2296      		adiw r28,2
 283:main.c        ****     for(i=0;i<8;i++)
 573               		.stabn	68,0,283,.LM48-.LFBB6
 574               	.LM48:
 575 0246 88E0      		ldi r24,8
 576 0248 2816      		cp r2,r24
 577 024a 3104      		cpc r3,__zero_reg__
 578 024c 01F0      		breq .L39
 579               	.L36:
 281:main.c        **** void update_sine(){    
 580               		.stabn	68,0,281,.LM49-.LFBB6
 581               	.LM49:
 582 024e C101      		movw r24,r2
 583 0250 860D      		add r24,r6
 584 0252 971D      		adc r25,r7
 286:main.c        ****             mask = (sinecounter+i)%28;
 585               		.stabn	68,0,286,.LM50-.LFBB6
 586               	.LM50:
 587 0254 B401      		movw r22,r8
 588 0256 00D0      		rcall __divmodhi4
 589 0258 6801      		movw r12,r16
 590 025a 7901      		movw r14,r18
 591 025c 00C0      		rjmp 2f
 592               		1:
 593 025e CC0C      		lsl r12
 594 0260 DD1C      		rol r13
 595 0262 EE1C      		rol r14
 596 0264 FF1C      		rol r15
 597               		2:
 598 0266 8A95      		dec r24
 599 0268 02F4      		brpl 1b
 600 026a 80E0      		ldi r24,lo8(sinemap)
 601 026c 90E0      		ldi r25,hi8(sinemap)
GAS LISTING /tmp/ccwyvPfy.s 			page 17


 602 026e A0E0      		ldi r26,0
 603 0270 B0E0      		ldi r27,0
 604 0272 00C0      		rjmp .L38
 605               	.L39:
 289:main.c        ****             //if(sinemap[j][(i+sinecounter)%28] == 1)
 290:main.c        ****             //    matrix[j][i] = wallbrightness;
 291:main.c        ****         }
 292:main.c        ****     sinecounter = (sinecounter+1)%28;  
 606               		.stabn	68,0,292,.LM51-.LFBB6
 607               	.LM51:
 608 0274 C501      		movw r24,r10
 609 0276 0196      		adiw r24,1
 610 0278 6CE1      		ldi r22,lo8(28)
 611 027a 70E0      		ldi r23,0
 612 027c 00D0      		rcall __divmodhi4
 613 027e 8093 0000 		sts sinecounter,r24
 614               	/* epilogue start */
 293:main.c        **** }
 615               		.stabn	68,0,293,.LM52-.LFBB6
 616               	.LM52:
 617 0282 DF91      		pop r29
 618 0284 CF91      		pop r28
 619 0286 1F91      		pop r17
 620 0288 0F91      		pop r16
 621 028a FF90      		pop r15
 622 028c EF90      		pop r14
 623 028e DF90      		pop r13
 624 0290 CF90      		pop r12
 625 0292 BF90      		pop r11
 626 0294 AF90      		pop r10
 627 0296 9F90      		pop r9
 628 0298 8F90      		pop r8
 629 029a 7F90      		pop r7
 630 029c 6F90      		pop r6
 631 029e 5F90      		pop r5
 632 02a0 4F90      		pop r4
 633 02a2 3F90      		pop r3
 634 02a4 2F90      		pop r2
 635 02a6 0895      		ret
 636               		.size	update_sine, .-update_sine
 637               	.Lscope6:
 638               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 639               		.stabd	78,0,0
 640               		.stabs	"update_smiley:F(0,15)",36,0,296,update_smiley
 641               	.global	update_smiley
 642               		.type	update_smiley, @function
 643               	update_smiley:
 644               		.stabd	46,0,0
 294:main.c        **** 
 295:main.c        **** 
 296:main.c        **** void update_smiley(){
 645               		.stabn	68,0,296,.LM53-.LFBB7
 646               	.LM53:
 647               	.LFBB7:
 648               	/* prologue: function */
 649               	/* frame size = 0 */
 650               	/* stack size = 0 */
GAS LISTING /tmp/ccwyvPfy.s 			page 18


 651               	.L__stack_usage = 0
 297:main.c        ****     copy_image(smileymap, wallbrightness);
 652               		.stabn	68,0,297,.LM54-.LFBB7
 653               	.LM54:
 654 02a8 6091 0000 		lds r22,wallbrightness
 655 02ac 7091 0000 		lds r23,wallbrightness+1
 656 02b0 80E0      		ldi r24,lo8(smileymap)
 657 02b2 90E0      		ldi r25,hi8(smileymap)
 658 02b4 00C0      		rjmp copy_image
 659               		.size	update_smiley, .-update_smiley
 660               	.Lscope7:
 661               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 662               		.stabd	78,0,0
 663               		.stabs	"update_bouncer:F(0,15)",36,0,300,update_bouncer
 664               	.global	update_bouncer
 665               		.type	update_bouncer, @function
 666               	update_bouncer:
 667               		.stabd	46,0,0
 298:main.c        **** }
 299:main.c        **** 
 300:main.c        **** void update_bouncer(){
 668               		.stabn	68,0,300,.LM55-.LFBB8
 669               	.LM55:
 670               	.LFBB8:
 671               	/* prologue: function */
 672               	/* frame size = 0 */
 673               	/* stack size = 0 */
 674               	.L__stack_usage = 0
 301:main.c        ****     if(dirx == 1)
 675               		.stabn	68,0,301,.LM56-.LFBB8
 676               	.LM56:
 677 02b6 9091 0000 		lds r25,dirx
 678 02ba 8091 0000 		lds r24,posx
 679 02be 9130      		cpi r25,lo8(1)
 680 02c0 01F4      		brne .L46
 302:main.c        ****       {
 303:main.c        ****         if(posx == 7)
 681               		.stabn	68,0,303,.LM57-.LFBB8
 682               	.LM57:
 683 02c2 8730      		cpi r24,lo8(7)
 684 02c4 01F4      		brne .L47
 304:main.c        ****         {
 305:main.c        ****           dirx = 0;
 685               		.stabn	68,0,305,.LM58-.LFBB8
 686               	.LM58:
 687 02c6 1092 0000 		sts dirx,__zero_reg__
 306:main.c        ****           posx -= 2;
 688               		.stabn	68,0,306,.LM59-.LFBB8
 689               	.LM59:
 690 02ca 85E0      		ldi r24,lo8(5)
 691 02cc 00C0      		rjmp .L54
 692               	.L47:
 307:main.c        ****         }else posx += 1;
 693               		.stabn	68,0,307,.LM60-.LFBB8
 694               	.LM60:
 695 02ce 8F5F      		subi r24,lo8(-(1))
 696 02d0 00C0      		rjmp .L54
GAS LISTING /tmp/ccwyvPfy.s 			page 19


 697               	.L46:
 308:main.c        ****       }
 309:main.c        ****       else{
 310:main.c        ****         if(posx == 0)
 698               		.stabn	68,0,310,.LM61-.LFBB8
 699               	.LM61:
 700 02d2 8111      		cpse r24,__zero_reg__
 701 02d4 00C0      		rjmp .L49
 311:main.c        ****         {
 312:main.c        ****           dirx = 1;
 702               		.stabn	68,0,312,.LM62-.LFBB8
 703               	.LM62:
 704 02d6 81E0      		ldi r24,lo8(1)
 705 02d8 8093 0000 		sts dirx,r24
 313:main.c        ****           posx += 2;
 706               		.stabn	68,0,313,.LM63-.LFBB8
 707               	.LM63:
 708 02dc 82E0      		ldi r24,lo8(2)
 709 02de 00C0      		rjmp .L54
 710               	.L49:
 314:main.c        ****         }
 315:main.c        ****         else posx -= 1;
 711               		.stabn	68,0,315,.LM64-.LFBB8
 712               	.LM64:
 713 02e0 8150      		subi r24,lo8(-(-1))
 714               	.L54:
 715 02e2 8093 0000 		sts posx,r24
 316:main.c        ****       }
 317:main.c        **** 
 318:main.c        ****       if(diry == 1)
 716               		.stabn	68,0,318,.LM65-.LFBB8
 717               	.LM65:
 718 02e6 9091 0000 		lds r25,diry
 719 02ea 8091 0000 		lds r24,posy
 720 02ee 9130      		cpi r25,lo8(1)
 721 02f0 01F4      		brne .L50
 319:main.c        ****       {
 320:main.c        ****         if(posy == 7)
 722               		.stabn	68,0,320,.LM66-.LFBB8
 723               	.LM66:
 724 02f2 8730      		cpi r24,lo8(7)
 725 02f4 01F4      		brne .L51
 321:main.c        ****         {
 322:main.c        ****           diry = 0;
 726               		.stabn	68,0,322,.LM67-.LFBB8
 727               	.LM67:
 728 02f6 1092 0000 		sts diry,__zero_reg__
 323:main.c        ****           posy -= 1;
 729               		.stabn	68,0,323,.LM68-.LFBB8
 730               	.LM68:
 731 02fa 86E0      		ldi r24,lo8(6)
 732 02fc 00C0      		rjmp .L55
 733               	.L51:
 324:main.c        ****         }else posy += 1;
 734               		.stabn	68,0,324,.LM69-.LFBB8
 735               	.LM69:
 736 02fe 8F5F      		subi r24,lo8(-(1))
GAS LISTING /tmp/ccwyvPfy.s 			page 20


 737 0300 00C0      		rjmp .L55
 738               	.L50:
 325:main.c        ****       }
 326:main.c        ****       else{
 327:main.c        ****         if(posy == 0)
 739               		.stabn	68,0,327,.LM70-.LFBB8
 740               	.LM70:
 741 0302 8111      		cpse r24,__zero_reg__
 742 0304 00C0      		rjmp .L53
 328:main.c        ****         {
 329:main.c        ****           diry = 1;
 743               		.stabn	68,0,329,.LM71-.LFBB8
 744               	.LM71:
 745 0306 81E0      		ldi r24,lo8(1)
 746 0308 8093 0000 		sts diry,r24
 747 030c 00C0      		rjmp .L55
 748               	.L53:
 330:main.c        ****           posy += 1;
 331:main.c        ****         }
 332:main.c        ****         else posy -= 1;
 749               		.stabn	68,0,332,.LM72-.LFBB8
 750               	.LM72:
 751 030e 8150      		subi r24,lo8(-(-1))
 752               	.L55:
 753 0310 8093 0000 		sts posy,r24
 333:main.c        ****       }
 334:main.c        **** 
 335:main.c        ****       draw_outline();
 754               		.stabn	68,0,335,.LM73-.LFBB8
 755               	.LM73:
 756 0314 00D0      		rcall draw_outline
 336:main.c        ****       matrix[posy][posx] = 0x00ff;
 757               		.stabn	68,0,336,.LM74-.LFBB8
 758               	.LM74:
 759 0316 8091 0000 		lds r24,posx
 760 031a E091 0000 		lds r30,posy
 761 031e 98E0      		ldi r25,lo8(8)
 762 0320 E99F      		mul r30,r25
 763 0322 F001      		movw r30,r0
 764 0324 1124      		clr __zero_reg__
 765 0326 E80F      		add r30,r24
 766 0328 F11D      		adc r31,__zero_reg__
 767 032a EE0F      		lsl r30
 768 032c FF1F      		rol r31
 769 032e E050      		subi r30,lo8(-(matrix))
 770 0330 F040      		sbci r31,hi8(-(matrix))
 771 0332 8FEF      		ldi r24,lo8(-1)
 772 0334 90E0      		ldi r25,0
 773 0336 9183      		std Z+1,r25
 774 0338 8083      		st Z,r24
 775 033a 0895      		ret
 776               		.size	update_bouncer, .-update_bouncer
 777               	.Lscope8:
 778               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 779               		.stabd	78,0,0
 780               		.stabs	"configure_sine:F(0,15)",36,0,339,configure_sine
 781               	.global	configure_sine
GAS LISTING /tmp/ccwyvPfy.s 			page 21


 782               		.type	configure_sine, @function
 783               	configure_sine:
 784               		.stabd	46,0,0
 337:main.c        **** }
 338:main.c        **** 
 339:main.c        **** void configure_sine(){
 785               		.stabn	68,0,339,.LM75-.LFBB9
 786               	.LM75:
 787               	.LFBB9:
 788               	/* prologue: function */
 789               	/* frame size = 0 */
 790               	/* stack size = 0 */
 791               	.L__stack_usage = 0
 340:main.c        ****     cli();
 792               		.stabn	68,0,340,.LM76-.LFBB9
 793               	.LM76:
 794               	/* #APP */
 795               	 ;  340 "main.c" 1
 796 033c F894      		cli
 797               	 ;  0 "" 2
 341:main.c        ****     OCR1A = 0x02ff;
 798               		.stabn	68,0,341,.LM77-.LFBB9
 799               	.LM77:
 800               	/* #NOAPP */
 801 033e 8FEF      		ldi r24,lo8(-1)
 802 0340 92E0      		ldi r25,lo8(2)
 803 0342 9093 8900 		sts 136+1,r25
 804 0346 8093 8800 		sts 136,r24
 342:main.c        ****     TCNT1 = 0;
 805               		.stabn	68,0,342,.LM78-.LFBB9
 806               	.LM78:
 807 034a 1092 8500 		sts 132+1,__zero_reg__
 808 034e 1092 8400 		sts 132,__zero_reg__
 343:main.c        ****     sei();
 809               		.stabn	68,0,343,.LM79-.LFBB9
 810               	.LM79:
 811               	/* #APP */
 812               	 ;  343 "main.c" 1
 813 0352 7894      		sei
 814               	 ;  0 "" 2
 344:main.c        ****     maxtimer = 0x0200;
 815               		.stabn	68,0,344,.LM80-.LFBB9
 816               	.LM80:
 817               	/* #NOAPP */
 818 0354 80E0      		ldi r24,0
 819 0356 92E0      		ldi r25,lo8(2)
 820 0358 9093 0000 		sts maxtimer+1,r25
 821 035c 8093 0000 		sts maxtimer,r24
 822 0360 0895      		ret
 823               		.size	configure_sine, .-configure_sine
 824               	.Lscope9:
 825               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 826               		.stabd	78,0,0
 827               		.stabs	"configure_sinecircle:F(0,15)",36,0,347,configure_sinecircle
 828               	.global	configure_sinecircle
 829               		.type	configure_sinecircle, @function
 830               	configure_sinecircle:
GAS LISTING /tmp/ccwyvPfy.s 			page 22


 831               		.stabd	46,0,0
 345:main.c        **** }
 346:main.c        **** 
 347:main.c        **** void configure_sinecircle(){
 832               		.stabn	68,0,347,.LM81-.LFBB10
 833               	.LM81:
 834               	.LFBB10:
 835               	/* prologue: function */
 836               	/* frame size = 0 */
 837               	/* stack size = 0 */
 838               	.L__stack_usage = 0
 348:main.c        ****     cli();
 839               		.stabn	68,0,348,.LM82-.LFBB10
 840               	.LM82:
 841               	/* #APP */
 842               	 ;  348 "main.c" 1
 843 0362 F894      		cli
 844               	 ;  0 "" 2
 349:main.c        ****     OCR1A = 0x1222;
 845               		.stabn	68,0,349,.LM83-.LFBB10
 846               	.LM83:
 847               	/* #NOAPP */
 848 0364 82E2      		ldi r24,lo8(34)
 849 0366 92E1      		ldi r25,lo8(18)
 850 0368 9093 8900 		sts 136+1,r25
 851 036c 8093 8800 		sts 136,r24
 350:main.c        ****     TCNT1 = 0;
 852               		.stabn	68,0,350,.LM84-.LFBB10
 853               	.LM84:
 854 0370 1092 8500 		sts 132+1,__zero_reg__
 855 0374 1092 8400 		sts 132,__zero_reg__
 351:main.c        ****     sei();
 856               		.stabn	68,0,351,.LM85-.LFBB10
 857               	.LM85:
 858               	/* #APP */
 859               	 ;  351 "main.c" 1
 860 0378 7894      		sei
 861               	 ;  0 "" 2
 352:main.c        ****     maxtimer = 0x00ff;
 862               		.stabn	68,0,352,.LM86-.LFBB10
 863               	.LM86:
 864               	/* #NOAPP */
 865 037a 8FEF      		ldi r24,lo8(-1)
 866 037c 90E0      		ldi r25,0
 867 037e 9093 0000 		sts maxtimer+1,r25
 868 0382 8093 0000 		sts maxtimer,r24
 869 0386 0895      		ret
 870               		.size	configure_sinecircle, .-configure_sinecircle
 871               	.Lscope10:
 872               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 873               		.stabd	78,0,0
 874               		.stabs	"configure_timer0:F(0,15)",36,0,355,configure_timer0
 875               	.global	configure_timer0
 876               		.type	configure_timer0, @function
 877               	configure_timer0:
 878               		.stabd	46,0,0
 353:main.c        **** }
GAS LISTING /tmp/ccwyvPfy.s 			page 23


 354:main.c        **** 
 355:main.c        **** void configure_timer0()
 356:main.c        **** {
 879               		.stabn	68,0,356,.LM87-.LFBB11
 880               	.LM87:
 881               	.LFBB11:
 882               	/* prologue: function */
 883               	/* frame size = 0 */
 884               	/* stack size = 0 */
 885               	.L__stack_usage = 0
 357:main.c        ****   cli();
 886               		.stabn	68,0,357,.LM88-.LFBB11
 887               	.LM88:
 888               	/* #APP */
 889               	 ;  357 "main.c" 1
 890 0388 F894      		cli
 891               	 ;  0 "" 2
 358:main.c        ****   TCCR0A = 0;
 892               		.stabn	68,0,358,.LM89-.LFBB11
 893               	.LM89:
 894               	/* #NOAPP */
 895 038a 14BC      		out 0x24,__zero_reg__
 359:main.c        ****   TCCR0B = 0;
 896               		.stabn	68,0,359,.LM90-.LFBB11
 897               	.LM90:
 898 038c 15BC      		out 0x25,__zero_reg__
 360:main.c        ****   TIMSK0 = 0; //Clear registers
 899               		.stabn	68,0,360,.LM91-.LFBB11
 900               	.LM91:
 901 038e EEE6      		ldi r30,lo8(110)
 902 0390 F0E0      		ldi r31,0
 903 0392 1082      		st Z,__zero_reg__
 361:main.c        ****   TCNT0 = 0; //reset timer
 904               		.stabn	68,0,361,.LM92-.LFBB11
 905               	.LM92:
 906 0394 16BC      		out 0x26,__zero_reg__
 362:main.c        **** 
 363:main.c        ****   OCR0A = 0xff;
 907               		.stabn	68,0,363,.LM93-.LFBB11
 908               	.LM93:
 909 0396 8FEF      		ldi r24,lo8(-1)
 910 0398 87BD      		out 0x27,r24
 364:main.c        ****   TIMSK0 |= BS(OCIE1A); //enable COMPA1 ISR
 911               		.stabn	68,0,364,.LM94-.LFBB11
 912               	.LM94:
 913 039a 8081      		ld r24,Z
 914 039c 8260      		ori r24,lo8(2)
 915 039e 8083      		st Z,r24
 365:main.c        ****   //TCCR0A |= BS(WGM11);//not needed since not toggling anything
 366:main.c        ****   //TCCR0B |= BS(CS12)|BS(CS10); //1024 prescaler, must be configured
 367:main.c        ****   TCCR0B |= BS(CS02)|BS(CS00)|BS(WGM02);
 916               		.stabn	68,0,367,.LM95-.LFBB11
 917               	.LM95:
 918 03a0 85B5      		in r24,0x25
 919 03a2 8D60      		ori r24,lo8(13)
 920 03a4 85BD      		out 0x25,r24
 368:main.c        ****   sei();
GAS LISTING /tmp/ccwyvPfy.s 			page 24


 921               		.stabn	68,0,368,.LM96-.LFBB11
 922               	.LM96:
 923               	/* #APP */
 924               	 ;  368 "main.c" 1
 925 03a6 7894      		sei
 926               	 ;  0 "" 2
 927               	/* #NOAPP */
 928 03a8 0895      		ret
 929               		.size	configure_timer0, .-configure_timer0
 930               	.Lscope11:
 931               		.stabs	"",36,0,0,.Lscope11-.LFBB11
 932               		.stabd	78,0,0
 933               		.stabs	"configure_timer1:F(0,15)",36,0,371,configure_timer1
 934               	.global	configure_timer1
 935               		.type	configure_timer1, @function
 936               	configure_timer1:
 937               		.stabd	46,0,0
 369:main.c        **** }
 370:main.c        **** 
 371:main.c        **** void configure_timer1()
 372:main.c        **** {
 938               		.stabn	68,0,372,.LM97-.LFBB12
 939               	.LM97:
 940               	.LFBB12:
 941               	/* prologue: function */
 942               	/* frame size = 0 */
 943               	/* stack size = 0 */
 944               	.L__stack_usage = 0
 373:main.c        ****   cli();
 945               		.stabn	68,0,373,.LM98-.LFBB12
 946               	.LM98:
 947               	/* #APP */
 948               	 ;  373 "main.c" 1
 949 03aa F894      		cli
 950               	 ;  0 "" 2
 374:main.c        ****   TCCR1A = 0;
 951               		.stabn	68,0,374,.LM99-.LFBB12
 952               	.LM99:
 953               	/* #NOAPP */
 954 03ac 1092 8000 		sts 128,__zero_reg__
 375:main.c        ****   TCCR1B = 0;
 955               		.stabn	68,0,375,.LM100-.LFBB12
 956               	.LM100:
 957 03b0 E1E8      		ldi r30,lo8(-127)
 958 03b2 F0E0      		ldi r31,0
 959 03b4 1082      		st Z,__zero_reg__
 376:main.c        ****   TIMSK1 = 0; //Clear registers
 960               		.stabn	68,0,376,.LM101-.LFBB12
 961               	.LM101:
 962 03b6 AFE6      		ldi r26,lo8(111)
 963 03b8 B0E0      		ldi r27,0
 964 03ba 1C92      		st X,__zero_reg__
 377:main.c        ****   TCNT1 = 0; //reset timer
 965               		.stabn	68,0,377,.LM102-.LFBB12
 966               	.LM102:
 967 03bc 1092 8500 		sts 132+1,__zero_reg__
 968 03c0 1092 8400 		sts 132,__zero_reg__
GAS LISTING /tmp/ccwyvPfy.s 			page 25


 378:main.c        **** 
 379:main.c        ****   OCR1A = 0x0fff;
 969               		.stabn	68,0,379,.LM103-.LFBB12
 970               	.LM103:
 971 03c4 8FEF      		ldi r24,lo8(-1)
 972 03c6 9FE0      		ldi r25,lo8(15)
 973 03c8 9093 8900 		sts 136+1,r25
 974 03cc 8093 8800 		sts 136,r24
 380:main.c        ****   TIMSK1 |= BS(OCIE1A); //enable COMPA1 ISR
 975               		.stabn	68,0,380,.LM104-.LFBB12
 976               	.LM104:
 977 03d0 8C91      		ld r24,X
 978 03d2 8260      		ori r24,lo8(2)
 979 03d4 8C93      		st X,r24
 381:main.c        ****   //TCCR0A |= BS(WGM11);//not needed since not toggling anything
 382:main.c        ****   //TCCR0B |= BS(CS12)|BS(CS10); //1024 prescaler, must be configured
 383:main.c        ****   TCCR1B |= BS(CS12)|BS(WGM12);
 980               		.stabn	68,0,383,.LM105-.LFBB12
 981               	.LM105:
 982 03d6 8081      		ld r24,Z
 983 03d8 8C60      		ori r24,lo8(12)
 984 03da 8083      		st Z,r24
 384:main.c        ****   sei();
 985               		.stabn	68,0,384,.LM106-.LFBB12
 986               	.LM106:
 987               	/* #APP */
 988               	 ;  384 "main.c" 1
 989 03dc 7894      		sei
 990               	 ;  0 "" 2
 991               	/* #NOAPP */
 992 03de 0895      		ret
 993               		.size	configure_timer1, .-configure_timer1
 994               	.Lscope12:
 995               		.stabs	"",36,0,0,.Lscope12-.LFBB12
 996               		.stabd	78,0,0
 997               		.stabs	"setup:F(0,15)",36,0,387,setup
 998               	.global	setup
 999               		.type	setup, @function
 1000               	setup:
 1001               		.stabd	46,0,0
 385:main.c        **** }
 386:main.c        **** 
 387:main.c        **** void setup()
 388:main.c        **** {
 1002               		.stabn	68,0,388,.LM107-.LFBB13
 1003               	.LM107:
 1004               	.LFBB13:
 1005               	/* prologue: function */
 1006               	/* frame size = 0 */
 1007               	/* stack size = 0 */
 1008               	.L__stack_usage = 0
 389:main.c        ****     erase_screen(0x0000);
 1009               		.stabn	68,0,389,.LM108-.LFBB13
 1010               	.LM108:
 1011 03e0 80E0      		ldi r24,0
 1012 03e2 90E0      		ldi r25,0
 1013 03e4 00D0      		rcall erase_screen
GAS LISTING /tmp/ccwyvPfy.s 			page 26


 390:main.c        ****     state = SINECIRCLE;
 1014               		.stabn	68,0,390,.LM109-.LFBB13
 1015               	.LM109:
 1016 03e6 83E0      		ldi r24,lo8(3)
 1017 03e8 8093 0000 		sts state,r24
 391:main.c        ****     statetimer = 0;
 1018               		.stabn	68,0,391,.LM110-.LFBB13
 1019               	.LM110:
 1020 03ec 1092 0000 		sts statetimer+1,__zero_reg__
 1021 03f0 1092 0000 		sts statetimer,__zero_reg__
 392:main.c        ****     //state = SINE;
 393:main.c        **** 
 394:main.c        ****     //bouncer variables
 395:main.c        ****     posx = 1;
 1022               		.stabn	68,0,395,.LM111-.LFBB13
 1023               	.LM111:
 1024 03f4 81E0      		ldi r24,lo8(1)
 1025 03f6 8093 0000 		sts posx,r24
 396:main.c        ****     posy = 0;
 1026               		.stabn	68,0,396,.LM112-.LFBB13
 1027               	.LM112:
 1028 03fa 1092 0000 		sts posy,__zero_reg__
 397:main.c        ****     dirx = 0;
 1029               		.stabn	68,0,397,.LM113-.LFBB13
 1030               	.LM113:
 1031 03fe 1092 0000 		sts dirx,__zero_reg__
 398:main.c        ****     diry = 0;
 1032               		.stabn	68,0,398,.LM114-.LFBB13
 1033               	.LM114:
 1034 0402 1092 0000 		sts diry,__zero_reg__
 399:main.c        ****     wallbrightness = 0x0000;
 1035               		.stabn	68,0,399,.LM115-.LFBB13
 1036               	.LM115:
 1037 0406 1092 0000 		sts wallbrightness+1,__zero_reg__
 1038 040a 1092 0000 		sts wallbrightness,__zero_reg__
 400:main.c        ****     delay = 0;
 1039               		.stabn	68,0,400,.LM116-.LFBB13
 1040               	.LM116:
 1041 040e 1092 0000 		sts delay+1,__zero_reg__
 1042 0412 1092 0000 		sts delay,__zero_reg__
 401:main.c        **** 
 402:main.c        ****     //circle variables
 403:main.c        ****     radius = 0;
 1043               		.stabn	68,0,403,.LM117-.LFBB13
 1044               	.LM117:
 1045 0416 1092 0000 		sts radius,__zero_reg__
 404:main.c        **** 
 405:main.c        ****     //sine var
 406:main.c        ****     sinecounter = 0;
 1046               		.stabn	68,0,406,.LM118-.LFBB13
 1047               	.LM118:
 1048 041a 1092 0000 		sts sinecounter,__zero_reg__
 407:main.c        ****     
 408:main.c        ****     //configure timer configuration
 409:main.c        ****     configure_timer0();
 1049               		.stabn	68,0,409,.LM119-.LFBB13
 1050               	.LM119:
GAS LISTING /tmp/ccwyvPfy.s 			page 27


 1051 041e 00D0      		rcall configure_timer0
 410:main.c        ****     configure_timer1();
 1052               		.stabn	68,0,410,.LM120-.LFBB13
 1053               	.LM120:
 1054 0420 00D0      		rcall configure_timer1
 411:main.c        **** 
 412:main.c        ****     //configure_sine(); 
 413:main.c        ****     configure_sinecircle();
 1055               		.stabn	68,0,413,.LM121-.LFBB13
 1056               	.LM121:
 1057 0422 00C0      		rjmp configure_sinecircle
 1058               		.size	setup, .-setup
 1059               	.Lscope13:
 1060               		.stabs	"",36,0,0,.Lscope13-.LFBB13
 1061               		.stabd	78,0,0
 1062               		.stabs	"__vector_14:F(0,15)",36,0,418,__vector_14
 1063               	.global	__vector_14
 1064               		.type	__vector_14, @function
 1065               	__vector_14:
 1066               		.stabd	46,0,0
 414:main.c        **** }
 415:main.c        **** 
 416:main.c        **** 
 417:main.c        **** //Compare on match interrupt
 418:main.c        **** ISR(TIMER0_COMPA_vect)
 419:main.c        **** {
 1067               		.stabn	68,0,419,.LM122-.LFBB14
 1068               	.LM122:
 1069               	.LFBB14:
 1070 0424 1F92      		push r1
 1071 0426 0F92      		push r0
 1072 0428 0FB6      		in r0,__SREG__
 1073 042a 0F92      		push r0
 1074 042c 1124      		clr __zero_reg__
 1075 042e 8F93      		push r24
 1076 0430 9F93      		push r25
 1077               	/* prologue: Signal */
 1078               	/* frame size = 0 */
 1079               	/* stack size = 5 */
 1080               	.L__stack_usage = 5
 420:main.c        ****     if(delay == 0x02)
 1081               		.stabn	68,0,420,.LM123-.LFBB14
 1082               	.LM123:
 1083 0432 8091 0000 		lds r24,delay
 1084 0436 9091 0000 		lds r25,delay+1
 1085 043a 8230      		cpi r24,2
 1086 043c 9105      		cpc r25,__zero_reg__
 1087 043e 01F4      		brne .L62
 421:main.c        ****     {
 422:main.c        ****         wallbrightness += 0x07;
 423:main.c        ****         wallbrightness += 0x0500;
 1088               		.stabn	68,0,423,.LM124-.LFBB14
 1089               	.LM124:
 1090 0440 8091 0000 		lds r24,wallbrightness
 1091 0444 9091 0000 		lds r25,wallbrightness+1
 1092 0448 895F      		subi r24,-7
 1093 044a 9A4F      		sbci r25,-6
GAS LISTING /tmp/ccwyvPfy.s 			page 28


 1094 044c 9093 0000 		sts wallbrightness+1,r25
 1095 0450 8093 0000 		sts wallbrightness,r24
 424:main.c        ****         delay = 0;
 1096               		.stabn	68,0,424,.LM125-.LFBB14
 1097               	.LM125:
 1098 0454 1092 0000 		sts delay+1,__zero_reg__
 1099 0458 1092 0000 		sts delay,__zero_reg__
 1100 045c 00C0      		rjmp .L61
 1101               	.L62:
 425:main.c        ****     }else
 426:main.c        ****         delay++;
 1102               		.stabn	68,0,426,.LM126-.LFBB14
 1103               	.LM126:
 1104 045e 0196      		adiw r24,1
 1105 0460 9093 0000 		sts delay+1,r25
 1106 0464 8093 0000 		sts delay,r24
 1107               	.L61:
 1108               	/* epilogue start */
 427:main.c        **** }
 1109               		.stabn	68,0,427,.LM127-.LFBB14
 1110               	.LM127:
 1111 0468 9F91      		pop r25
 1112 046a 8F91      		pop r24
 1113 046c 0F90      		pop r0
 1114 046e 0FBE      		out __SREG__,r0
 1115 0470 0F90      		pop r0
 1116 0472 1F90      		pop r1
 1117 0474 1895      		reti
 1118               		.size	__vector_14, .-__vector_14
 1119               	.Lscope14:
 1120               		.stabs	"",36,0,0,.Lscope14-.LFBB14
 1121               		.stabd	78,0,0
 1122               		.stabs	"__vector_11:F(0,15)",36,0,429,__vector_11
 1123               	.global	__vector_11
 1124               		.type	__vector_11, @function
 1125               	__vector_11:
 1126               		.stabd	46,0,0
 428:main.c        **** 
 429:main.c        **** ISR(TIMER1_COMPA_vect)
 430:main.c        **** {
 1127               		.stabn	68,0,430,.LM128-.LFBB15
 1128               	.LM128:
 1129               	.LFBB15:
 1130 0476 1F92      		push r1
 1131 0478 0F92      		push r0
 1132 047a 0FB6      		in r0,__SREG__
 1133 047c 0F92      		push r0
 1134 047e 1124      		clr __zero_reg__
 1135 0480 2F93      		push r18
 1136 0482 3F93      		push r19
 1137 0484 4F93      		push r20
 1138 0486 5F93      		push r21
 1139 0488 6F93      		push r22
 1140 048a 7F93      		push r23
 1141 048c 8F93      		push r24
 1142 048e 9F93      		push r25
 1143 0490 AF93      		push r26
GAS LISTING /tmp/ccwyvPfy.s 			page 29


 1144 0492 BF93      		push r27
 1145 0494 EF93      		push r30
 1146 0496 FF93      		push r31
 1147               	/* prologue: Signal */
 1148               	/* frame size = 0 */
 1149               	/* stack size = 15 */
 1150               	.L__stack_usage = 15
 431:main.c        ****     erase_screen(0x0000);
 1151               		.stabn	68,0,431,.LM129-.LFBB15
 1152               	.LM129:
 1153 0498 80E0      		ldi r24,0
 1154 049a 90E0      		ldi r25,0
 1155 049c 00D0      		rcall erase_screen
 432:main.c        ****     //update x
 433:main.c        ****     switch(state){
 1156               		.stabn	68,0,433,.LM130-.LFBB15
 1157               	.LM130:
 1158 049e 8091 0000 		lds r24,state
 1159 04a2 8130      		cpi r24,lo8(1)
 1160 04a4 01F0      		breq .L67
 1161 04a6 00F0      		brlo .L66
 1162 04a8 8230      		cpi r24,lo8(2)
 1163 04aa 01F0      		breq .L68
 1164 04ac 8330      		cpi r24,lo8(3)
 1165 04ae 01F4      		brne .L65
 1166 04b0 00C0      		rjmp .L69
 1167               	.L66:
 434:main.c        ****         case BOUNCER:
 435:main.c        ****             update_bouncer();
 1168               		.stabn	68,0,435,.LM131-.LFBB15
 1169               	.LM131:
 1170 04b2 00D0      		rcall update_bouncer
 436:main.c        ****             break;
 1171               		.stabn	68,0,436,.LM132-.LFBB15
 1172               	.LM132:
 1173 04b4 00C0      		rjmp .L65
 1174               	.L67:
 437:main.c        ****         case SMILEY:
 438:main.c        ****             update_smiley();
 1175               		.stabn	68,0,438,.LM133-.LFBB15
 1176               	.LM133:
 1177 04b6 00D0      		rcall update_smiley
 439:main.c        ****             break;
 1178               		.stabn	68,0,439,.LM134-.LFBB15
 1179               	.LM134:
 1180 04b8 00C0      		rjmp .L65
 1181               	.L68:
 440:main.c        ****         case SINE:
 441:main.c        ****             update_sine();
 1182               		.stabn	68,0,441,.LM135-.LFBB15
 1183               	.LM135:
 1184 04ba 00D0      		rcall update_sine
 442:main.c        ****             break;
 1185               		.stabn	68,0,442,.LM136-.LFBB15
 1186               	.LM136:
 1187 04bc 00C0      		rjmp .L65
 1188               	.L69:
GAS LISTING /tmp/ccwyvPfy.s 			page 30


 443:main.c        ****         case SINECIRCLE:
 444:main.c        ****             update_sinecircle();
 1189               		.stabn	68,0,444,.LM137-.LFBB15
 1190               	.LM137:
 1191 04be 00D0      		rcall update_sinecircle
 1192               	.L65:
 445:main.c        ****             break;
 446:main.c        ****     }//end switch
 447:main.c        **** 
 448:main.c        ****     statetimer += 1;
 1193               		.stabn	68,0,448,.LM138-.LFBB15
 1194               	.LM138:
 1195 04c0 8091 0000 		lds r24,statetimer
 1196 04c4 9091 0000 		lds r25,statetimer+1
 1197 04c8 0196      		adiw r24,1
 1198 04ca 9093 0000 		sts statetimer+1,r25
 1199 04ce 8093 0000 		sts statetimer,r24
 449:main.c        ****     if(statetimer==maxtimer)
 1200               		.stabn	68,0,449,.LM139-.LFBB15
 1201               	.LM139:
 1202 04d2 2091 0000 		lds r18,maxtimer
 1203 04d6 3091 0000 		lds r19,maxtimer+1
 1204 04da 8217      		cp r24,r18
 1205 04dc 9307      		cpc r25,r19
 1206 04de 01F4      		brne .L64
 450:main.c        ****     {
 451:main.c        ****         statetimer=0;
 1207               		.stabn	68,0,451,.LM140-.LFBB15
 1208               	.LM140:
 1209 04e0 1092 0000 		sts statetimer+1,__zero_reg__
 1210 04e4 1092 0000 		sts statetimer,__zero_reg__
 452:main.c        ****         state = (state+1)%(SINECIRCLE+1);
 1211               		.stabn	68,0,452,.LM141-.LFBB15
 1212               	.LM141:
 1213 04e8 8091 0000 		lds r24,state
 1214 04ec 90E0      		ldi r25,0
 1215 04ee 0196      		adiw r24,1
 1216 04f0 8370      		andi r24,3
 1217 04f2 9927      		clr r25
 1218 04f4 8093 0000 		sts state,r24
 453:main.c        ****         switch(state){
 1219               		.stabn	68,0,453,.LM142-.LFBB15
 1220               	.LM142:
 1221 04f8 8230      		cpi r24,lo8(2)
 1222 04fa 01F0      		breq .L72
 1223 04fc 8330      		cpi r24,lo8(3)
 1224 04fe 01F4      		brne .L74
 1225 0500 00C0      		rjmp .L73
 1226               	.L72:
 454:main.c        ****             case(SINE):
 455:main.c        ****                 configure_sine();
 1227               		.stabn	68,0,455,.LM143-.LFBB15
 1228               	.LM143:
 1229 0502 00D0      		rcall configure_sine
 456:main.c        ****                 break;
 1230               		.stabn	68,0,456,.LM144-.LFBB15
 1231               	.LM144:
GAS LISTING /tmp/ccwyvPfy.s 			page 31


 1232 0504 00C0      		rjmp .L64
 1233               	.L73:
 457:main.c        ****             case(SINECIRCLE):
 458:main.c        ****                 configure_sinecircle();
 1234               		.stabn	68,0,458,.LM145-.LFBB15
 1235               	.LM145:
 1236 0506 00D0      		rcall configure_sinecircle
 459:main.c        ****                 break;
 1237               		.stabn	68,0,459,.LM146-.LFBB15
 1238               	.LM146:
 1239 0508 00C0      		rjmp .L64
 1240               	.L74:
 460:main.c        ****             default:
 461:main.c        ****                 OCR1A = 0x0fff;
 1241               		.stabn	68,0,461,.LM147-.LFBB15
 1242               	.LM147:
 1243 050a 8FEF      		ldi r24,lo8(-1)
 1244 050c 9FE0      		ldi r25,lo8(15)
 1245 050e 9093 8900 		sts 136+1,r25
 1246 0512 8093 8800 		sts 136,r24
 462:main.c        ****                 maxtimer = 0x00ff;
 1247               		.stabn	68,0,462,.LM148-.LFBB15
 1248               	.LM148:
 1249 0516 8FEF      		ldi r24,lo8(-1)
 1250 0518 90E0      		ldi r25,0
 1251 051a 9093 0000 		sts maxtimer+1,r25
 1252 051e 8093 0000 		sts maxtimer,r24
 1253               	.L64:
 1254               	/* epilogue start */
 463:main.c        ****         }
 464:main.c        ****     }
 465:main.c        **** }//end ISR COMPA TIMER1
 1255               		.stabn	68,0,465,.LM149-.LFBB15
 1256               	.LM149:
 1257 0522 FF91      		pop r31
 1258 0524 EF91      		pop r30
 1259 0526 BF91      		pop r27
 1260 0528 AF91      		pop r26
 1261 052a 9F91      		pop r25
 1262 052c 8F91      		pop r24
 1263 052e 7F91      		pop r23
 1264 0530 6F91      		pop r22
 1265 0532 5F91      		pop r21
 1266 0534 4F91      		pop r20
 1267 0536 3F91      		pop r19
 1268 0538 2F91      		pop r18
 1269 053a 0F90      		pop r0
 1270 053c 0FBE      		out __SREG__,r0
 1271 053e 0F90      		pop r0
 1272 0540 1F90      		pop r1
 1273 0542 1895      		reti
 1274               		.size	__vector_11, .-__vector_11
 1275               	.Lscope15:
 1276               		.stabs	"",36,0,0,.Lscope15-.LFBB15
 1277               		.stabd	78,0,0
 1278               		.section	.text.startup,"ax",@progbits
 1279               		.stabs	"main:F(0,1)",36,0,469,main
GAS LISTING /tmp/ccwyvPfy.s 			page 32


 1280               	.global	main
 1281               		.type	main, @function
 1282               	main:
 1283               		.stabd	46,0,0
 466:main.c        **** 
 467:main.c        **** /* Main */
 468:main.c        **** 
 469:main.c        **** int main(void)
 470:main.c        **** {
 1284               		.stabn	68,0,470,.LM150-.LFBB16
 1285               	.LM150:
 1286               	.LFBB16:
 1287               	/* prologue: function */
 1288               	/* frame size = 0 */
 1289               	/* stack size = 0 */
 1290               	.L__stack_usage = 0
 471:main.c        **** 
 472:main.c        ****     setup();
 1291               		.stabn	68,0,472,.LM151-.LFBB16
 1292               	.LM151:
 1293 0000 00D0      		rcall setup
 473:main.c        **** 
 474:main.c        ****     //Configure image
 475:main.c        ****     //topline (y,x)
 476:main.c        **** 
 477:main.c        ****     /*
 478:main.c        ****     //write green elsewhere
 479:main.c        ****     for(i=0;i<8;i++)
 480:main.c        ****       for(j=0;j<8;j++)
 481:main.c        ****       {
 482:main.c        ****         if(matrix[i][j] != 255)
 483:main.c        ****           matrix[i][j] = (0xff<<8);
 484:main.c        ****       }
 485:main.c        ****       */
 486:main.c        **** 
 487:main.c        ****     //Configure timers first
 488:main.c        ****     //timer = TIMER_MAX_VALUE;
 489:main.c        **** 
 490:main.c        ****     //Configure all outputs
 491:main.c        ****     DDRB = 0xff; //SPI out
 1294               		.stabn	68,0,491,.LM152-.LFBB16
 1295               	.LM152:
 1296 0002 8FEF      		ldi r24,lo8(-1)
 1297 0004 84B9      		out 0x4,r24
 492:main.c        ****     DDRD = 0xff; //rows
 1298               		.stabn	68,0,492,.LM153-.LFBB16
 1299               	.LM153:
 1300 0006 8AB9      		out 0xa,r24
 493:main.c        ****     DDRC = 0xff; //shifter
 1301               		.stabn	68,0,493,.LM154-.LFBB16
 1302               	.LM154:
 1303 0008 87B9      		out 0x7,r24
 494:main.c        **** 
 495:main.c        ****     //Clear ports
 496:main.c        ****     PORTB = 0x00;
 1304               		.stabn	68,0,496,.LM155-.LFBB16
 1305               	.LM155:
GAS LISTING /tmp/ccwyvPfy.s 			page 33


 1306 000a 15B8      		out 0x5,__zero_reg__
 497:main.c        ****     PORTC = 0x00;
 1307               		.stabn	68,0,497,.LM156-.LFBB16
 1308               	.LM156:
 1309 000c 18B8      		out 0x8,__zero_reg__
 498:main.c        ****     PORTD = 0x00;
 1310               		.stabn	68,0,498,.LM157-.LFBB16
 1311               	.LM157:
 1312 000e 1BB8      		out 0xb,__zero_reg__
 499:main.c        **** 
 500:main.c        ****     //Initailize variables
 501:main.c        ****     uint8_t y=0;
 502:main.c        ****     PORTD = 0x00; //clear rows
 1313               		.stabn	68,0,502,.LM158-.LFBB16
 1314               	.LM158:
 1315 0010 1BB8      		out 0xb,__zero_reg__
 503:main.c        ****     uint8_t x=0;
 504:main.c        ****     inttimer=0x00;
 1316               		.stabn	68,0,504,.LM159-.LFBB16
 1317               	.LM159:
 1318 0012 1092 0000 		sts inttimer,__zero_reg__
 501:main.c        ****     uint8_t y=0;
 1319               		.stabn	68,0,501,.LM160-.LFBB16
 1320               	.LM160:
 1321 0016 10E0      		ldi r17,0
 505:main.c        **** 
 506:main.c        ****     while(1)
 507:main.c        ****     {
 508:main.c        ****         PORTC &= NOT(BS(reset));//clear everything
 509:main.c        ****         PORTC = 0x00|BS(reset);
 1322               		.stabn	68,0,509,.LM161-.LFBB16
 1323               	.LM161:
 1324 0018 00E2      		ldi r16,lo8(32)
 510:main.c        **** 
 511:main.c        ****         //Green pixels
 512:main.c        ****         for(x=0;x<8;x++)
 513:main.c        ****         {
 514:main.c        ****             if( (((matrix[y][7-x]))&0x00ff) >= inttimer)
 515:main.c        ****             {
 516:main.c        ****                 PORTC |= BS(data);
 517:main.c        ****             }else{
 518:main.c        ****                 PORTC &= NOT(BS(data));
 519:main.c        ****             }
 520:main.c        **** 
 521:main.c        ****             PORTC |= BS(shift);
 522:main.c        ****             PORTC &= NOT(BS(shift));
 523:main.c        ****         }
 524:main.c        **** 
 525:main.c        ****           //Red pixels
 526:main.c        ****         for(x=0;x<8;x++)
 527:main.c        ****         {
 528:main.c        ****             if( (((matrix[y][7-x])>>8)) >= inttimer)
 529:main.c        ****             {
 530:main.c        ****                 PORTC |= BS(data);
 531:main.c        ****             }else{
 532:main.c        ****                 PORTC &= NOT(BS(data));
 533:main.c        ****             }
GAS LISTING /tmp/ccwyvPfy.s 			page 34


 534:main.c        **** 
 535:main.c        ****             PORTC |= BS(shift);
 536:main.c        ****             PORTC &= NOT(BS(shift));
 537:main.c        ****         }//end for
 538:main.c        **** 
 539:main.c        ****         PORTD = 0x00; //clear display
 540:main.c        ****         PORTC |= BS(latch);
 541:main.c        ****         PORTC &= NOT(BS(latch));
 542:main.c        **** 
 543:main.c        ****         //Output row data
 544:main.c        ****         PORTD = BS(y);
 1325               		.stabn	68,0,544,.LM162-.LFBB16
 1326               	.LM162:
 1327 001a E1E0      		ldi r30,lo8(1)
 1328 001c F0E0      		ldi r31,0
 545:main.c        ****         y++;
 546:main.c        ****         y = y%8;
 547:main.c        **** 
 548:main.c        **** 
 549:main.c        ****         //Increment intensity timer
 550:main.c        ****         
 551:main.c        ****         if(inttimer==255)
 552:main.c        ****             inttimer=1;
 1329               		.stabn	68,0,552,.LM163-.LFBB16
 1330               	.LM163:
 1331 001e FF24      		clr r15
 1332 0020 F394      		inc r15
 1333               	.L87:
 508:main.c        ****         PORTC &= NOT(BS(reset));//clear everything
 1334               		.stabn	68,0,508,.LM164-.LFBB16
 1335               	.LM164:
 1336 0022 4598      		cbi 0x8,5
 509:main.c        ****         PORTC = 0x00|BS(reset);
 1337               		.stabn	68,0,509,.LM165-.LFBB16
 1338               	.LM165:
 1339 0024 08B9      		out 0x8,r16
 469:main.c        **** int main(void)
 1340               		.stabn	68,0,469,.LM166-.LFBB16
 1341               	.LM166:
 1342 0026 612F      		mov r22,r17
 1343 0028 70E0      		ldi r23,0
 1344 002a 9B01      		movw r18,r22
 1345 002c C4E0      		ldi r28,4
 1346               		1:
 1347 002e 220F      		lsl r18
 1348 0030 331F      		rol r19
 1349 0032 CA95      		dec r28
 1350 0034 01F4      		brne 1b
 1351 0036 2050      		subi r18,lo8(-(matrix))
 1352 0038 3040      		sbci r19,hi8(-(matrix))
 1353 003a 80E0      		ldi r24,0
 1354 003c 90E0      		ldi r25,0
 1355               	.L79:
 1356 003e D901      		movw r26,r18
 1357 0040 A80F      		add r26,r24
 1358 0042 B91F      		adc r27,r25
 514:main.c        ****             if( (((matrix[y][7-x]))&0x00ff) >= inttimer)
GAS LISTING /tmp/ccwyvPfy.s 			page 35


 1359               		.stabn	68,0,514,.LM167-.LFBB16
 1360               	.LM167:
 1361 0044 1E96      		adiw r26,14
 1362 0046 4D91      		ld r20,X+
 1363 0048 5C91      		ld r21,X
 1364 004a 1F97      		sbiw r26,14+1
 1365 004c 5527      		clr r21
 1366 004e A091 0000 		lds r26,inttimer
 1367 0052 B0E0      		ldi r27,0
 1368 0054 4A17      		cp r20,r26
 1369 0056 5B07      		cpc r21,r27
 1370 0058 00F0      		brlo .L77
 516:main.c        ****                 PORTC |= BS(data);
 1371               		.stabn	68,0,516,.LM168-.LFBB16
 1372               	.LM168:
 1373 005a 409A      		sbi 0x8,0
 1374 005c 00C0      		rjmp .L78
 1375               	.L77:
 518:main.c        ****                 PORTC &= NOT(BS(data));
 1376               		.stabn	68,0,518,.LM169-.LFBB16
 1377               	.LM169:
 1378 005e 4098      		cbi 0x8,0
 1379               	.L78:
 521:main.c        ****             PORTC |= BS(shift);
 1380               		.stabn	68,0,521,.LM170-.LFBB16
 1381               	.LM170:
 1382 0060 419A      		sbi 0x8,1
 522:main.c        ****             PORTC &= NOT(BS(shift));
 1383               		.stabn	68,0,522,.LM171-.LFBB16
 1384               	.LM171:
 1385 0062 4198      		cbi 0x8,1
 1386 0064 0297      		sbiw r24,2
 512:main.c        ****         for(x=0;x<8;x++)
 1387               		.stabn	68,0,512,.LM172-.LFBB16
 1388               	.LM172:
 1389 0066 803F      		cpi r24,-16
 1390 0068 4FEF      		ldi r20,-1
 1391 006a 9407      		cpc r25,r20
 1392 006c 01F4      		brne .L79
 469:main.c        **** int main(void)
 1393               		.stabn	68,0,469,.LM173-.LFBB16
 1394               	.LM173:
 1395 006e 9B01      		movw r18,r22
 1396 0070 B4E0      		ldi r27,4
 1397               		1:
 1398 0072 220F      		lsl r18
 1399 0074 331F      		rol r19
 1400 0076 BA95      		dec r27
 1401 0078 01F4      		brne 1b
 1402 007a 2050      		subi r18,lo8(-(matrix))
 1403 007c 3040      		sbci r19,hi8(-(matrix))
 1404 007e 80E0      		ldi r24,0
 1405 0080 90E0      		ldi r25,0
 1406               	.L82:
 1407 0082 D901      		movw r26,r18
 1408 0084 A80F      		add r26,r24
 1409 0086 B91F      		adc r27,r25
GAS LISTING /tmp/ccwyvPfy.s 			page 36


 528:main.c        ****             if( (((matrix[y][7-x])>>8)) >= inttimer)
 1410               		.stabn	68,0,528,.LM174-.LFBB16
 1411               	.LM174:
 1412 0088 1F96      		adiw r26,15
 1413 008a 4C91      		ld r20,X
 1414 008c C42F      		mov r28,r20
 1415 008e 40E0      		ldi r20,0
 1416 0090 D42F      		mov r29,r20
 1417 0092 4091 0000 		lds r20,inttimer
 1418 0096 50E0      		ldi r21,0
 1419 0098 C417      		cp r28,r20
 1420 009a D507      		cpc r29,r21
 1421 009c 00F0      		brlo .L80
 530:main.c        ****                 PORTC |= BS(data);
 1422               		.stabn	68,0,530,.LM175-.LFBB16
 1423               	.LM175:
 1424 009e 409A      		sbi 0x8,0
 1425 00a0 00C0      		rjmp .L81
 1426               	.L80:
 532:main.c        ****                 PORTC &= NOT(BS(data));
 1427               		.stabn	68,0,532,.LM176-.LFBB16
 1428               	.LM176:
 1429 00a2 4098      		cbi 0x8,0
 1430               	.L81:
 535:main.c        ****             PORTC |= BS(shift);
 1431               		.stabn	68,0,535,.LM177-.LFBB16
 1432               	.LM177:
 1433 00a4 419A      		sbi 0x8,1
 536:main.c        ****             PORTC &= NOT(BS(shift));
 1434               		.stabn	68,0,536,.LM178-.LFBB16
 1435               	.LM178:
 1436 00a6 4198      		cbi 0x8,1
 1437 00a8 0297      		sbiw r24,2
 526:main.c        ****         for(x=0;x<8;x++)
 1438               		.stabn	68,0,526,.LM179-.LFBB16
 1439               	.LM179:
 1440 00aa 803F      		cpi r24,-16
 1441 00ac 4FEF      		ldi r20,-1
 1442 00ae 9407      		cpc r25,r20
 1443 00b0 01F4      		brne .L82
 539:main.c        ****         PORTD = 0x00; //clear display
 1444               		.stabn	68,0,539,.LM180-.LFBB16
 1445               	.LM180:
 1446 00b2 1BB8      		out 0xb,__zero_reg__
 540:main.c        ****         PORTC |= BS(latch);
 1447               		.stabn	68,0,540,.LM181-.LFBB16
 1448               	.LM181:
 1449 00b4 429A      		sbi 0x8,2
 541:main.c        ****         PORTC &= NOT(BS(latch));
 1450               		.stabn	68,0,541,.LM182-.LFBB16
 1451               	.LM182:
 1452 00b6 4298      		cbi 0x8,2
 544:main.c        ****         PORTD = BS(y);
 1453               		.stabn	68,0,544,.LM183-.LFBB16
 1454               	.LM183:
 1455 00b8 CF01      		movw r24,r30
 1456 00ba 00C0      		rjmp 2f
GAS LISTING /tmp/ccwyvPfy.s 			page 37


 1457               		1:
 1458 00bc 880F      		lsl r24
 1459 00be 991F      		rol r25
 1460               		2:
 1461 00c0 6A95      		dec r22
 1462 00c2 02F4      		brpl 1b
 1463 00c4 8BB9      		out 0xb,r24
 545:main.c        ****         y++;
 1464               		.stabn	68,0,545,.LM184-.LFBB16
 1465               	.LM184:
 1466 00c6 1F5F      		subi r17,lo8(-(1))
 546:main.c        ****         y = y%8;
 1467               		.stabn	68,0,546,.LM185-.LFBB16
 1468               	.LM185:
 1469 00c8 1770      		andi r17,lo8(7)
 551:main.c        ****         if(inttimer==255)
 1470               		.stabn	68,0,551,.LM186-.LFBB16
 1471               	.LM186:
 1472 00ca 8091 0000 		lds r24,inttimer
 1473 00ce 8F3F      		cpi r24,lo8(-1)
 1474 00d0 01F4      		brne .L83
 1475               		.stabn	68,0,552,.LM187-.LFBB16
 1476               	.LM187:
 1477 00d2 F092 0000 		sts inttimer,r15
 1478 00d6 00C0      		rjmp .L87
 1479               	.L83:
 553:main.c        ****         else
 554:main.c        ****             inttimer++;
 1480               		.stabn	68,0,554,.LM188-.LFBB16
 1481               	.LM188:
 1482 00d8 8F5F      		subi r24,lo8(-(1))
 1483 00da 8093 0000 		sts inttimer,r24
 1484 00de 00C0      		rjmp .L87
 1485               		.size	main, .-main
 1486               	.Lscope16:
 1487               		.stabs	"",36,0,0,.Lscope16-.LFBB16
 1488               		.stabd	78,0,0
 1489               	.global	sinecirclemap
 1490               		.data
 1491               		.type	sinecirclemap, @object
 1492               		.size	sinecirclemap, 88
 1493               	sinecirclemap:
 1494 0000 00        		.byte	0
 1495 0001 00        		.byte	0
 1496 0002 00        		.byte	0
 1497 0003 00        		.byte	0
 1498 0004 00        		.byte	0
 1499 0005 00        		.byte	0
 1500 0006 00        		.byte	0
 1501 0007 00        		.byte	0
 1502 0008 00        		.byte	0
 1503 0009 00        		.byte	0
 1504 000a 00        		.byte	0
 1505 000b 00        		.byte	0
 1506 000c 00        		.byte	0
 1507 000d 00        		.byte	0
 1508 000e 00        		.byte	0
GAS LISTING /tmp/ccwyvPfy.s 			page 38


 1509 000f 00        		.byte	0
 1510 0010 00        		.byte	0
 1511 0011 00        		.byte	0
 1512 0012 00        		.byte	0
 1513 0013 00        		.byte	0
 1514 0014 00        		.byte	0
 1515 0015 00        		.byte	0
 1516 0016 00        		.byte	0
 1517 0017 00        		.byte	0
 1518 0018 00        		.byte	0
 1519 0019 00        		.byte	0
 1520 001a 00        		.byte	0
 1521 001b 10        		.byte	16
 1522 001c 00        		.byte	0
 1523 001d 00        		.byte	0
 1524 001e 00        		.byte	0
 1525 001f 00        		.byte	0
 1526 0020 00        		.byte	0
 1527 0021 00        		.byte	0
 1528 0022 00        		.byte	0
 1529 0023 18        		.byte	24
 1530 0024 18        		.byte	24
 1531 0025 00        		.byte	0
 1532 0026 00        		.byte	0
 1533 0027 00        		.byte	0
 1534 0028 00        		.byte	0
 1535 0029 00        		.byte	0
 1536 002a 18        		.byte	24
 1537 002b 24        		.byte	36
 1538 002c 24        		.byte	36
 1539 002d 18        		.byte	24
 1540 002e 00        		.byte	0
 1541 002f 00        		.byte	0
 1542 0030 00        		.byte	0
 1543 0031 24        		.byte	36
 1544 0032 66        		.byte	102
 1545 0033 00        		.byte	0
 1546 0034 00        		.byte	0
 1547 0035 66        		.byte	102
 1548 0036 24        		.byte	36
 1549 0037 00        		.byte	0
 1550 0038 00        		.byte	0
 1551 0039 18        		.byte	24
 1552 003a 00        		.byte	0
 1553 003b 42        		.byte	66
 1554 003c 42        		.byte	66
 1555 003d 00        		.byte	0
 1556 003e 18        		.byte	24
 1557 003f 00        		.byte	0
 1558 0040 24        		.byte	36
 1559 0041 42        		.byte	66
 1560 0042 81        		.byte	-127
 1561 0043 00        		.byte	0
 1562 0044 00        		.byte	0
 1563 0045 81        		.byte	-127
 1564 0046 42        		.byte	66
 1565 0047 24        		.byte	36
GAS LISTING /tmp/ccwyvPfy.s 			page 39


 1566 0048 C3        		.byte	-61
 1567 0049 81        		.byte	-127
 1568 004a 00        		.byte	0
 1569 004b 00        		.byte	0
 1570 004c 00        		.byte	0
 1571 004d 00        		.byte	0
 1572 004e 81        		.byte	-127
 1573 004f C3        		.byte	-61
 1574 0050 18        		.byte	24
 1575 0051 00        		.byte	0
 1576 0052 00        		.byte	0
 1577 0053 81        		.byte	-127
 1578 0054 81        		.byte	-127
 1579 0055 00        		.byte	0
 1580 0056 00        		.byte	0
 1581 0057 18        		.byte	24
 1582               	.global	sinemap
 1583               		.type	sinemap, @object
 1584               		.size	sinemap, 32
 1585               	sinemap:
 1586 0058 00        		.byte	0
 1587 0059 00        		.byte	0
 1588 005a 00        		.byte	0
 1589 005b 0F        		.byte	15
 1590 005c 03        		.byte	3
 1591 005d 00        		.byte	0
 1592 005e C0        		.byte	-64
 1593 005f 00        		.byte	0
 1594 0060 0C        		.byte	12
 1595 0061 00        		.byte	0
 1596 0062 30        		.byte	48
 1597 0063 00        		.byte	0
 1598 0064 10        		.byte	16
 1599 0065 00        		.byte	0
 1600 0066 08        		.byte	8
 1601 0067 00        		.byte	0
 1602 0068 20        		.byte	32
 1603 0069 00        		.byte	0
 1604 006a 04        		.byte	4
 1605 006b 00        		.byte	0
 1606 006c C0        		.byte	-64
 1607 006d 00        		.byte	0
 1608 006e 03        		.byte	3
 1609 006f 00        		.byte	0
 1610 0070 00        		.byte	0
 1611 0071 C3        		.byte	-61
 1612 0072 00        		.byte	0
 1613 0073 00        		.byte	0
 1614 0074 00        		.byte	0
 1615 0075 3C        		.byte	60
 1616 0076 00        		.byte	0
 1617 0077 00        		.byte	0
 1618               	.global	smileymap
 1619               		.type	smileymap, @object
 1620               		.size	smileymap, 8
 1621               	smileymap:
 1622 0078 3C        		.byte	60
GAS LISTING /tmp/ccwyvPfy.s 			page 40


 1623 0079 42        		.byte	66
 1624 007a A5        		.byte	-91
 1625 007b 81        		.byte	-127
 1626 007c A5        		.byte	-91
 1627 007d 99        		.byte	-103
 1628 007e 42        		.byte	66
 1629 007f 3C        		.byte	60
 1630               		.comm	sinecounter,1,1
 1631               		.comm	radius,1,1
 1632               		.comm	wallbrightness,2,1
 1633               		.comm	diry,1,1
 1634               		.comm	dirx,1,1
 1635               		.comm	posy,1,1
 1636               		.comm	posx,1,1
 1637               		.comm	delay,2,1
 1638               		.comm	maxtimer,2,1
 1639               		.comm	inttimer,1,1
 1640               		.comm	matrix,128,1
 1641               		.comm	statetimer,2,1
 1642               		.comm	state,1,1
 1643               		.stabs	"state:G(5,2)",32,0,36,0
 1644               		.stabs	"statetimer:G(5,4)",32,0,37,0
 1645               		.stabs	"matrix:G(0,19)=ar(0,18);0;7;(0,20)=ar(0,18);0;7;(5,4)",32,0,38,0
 1646               		.stabs	"inttimer:G(5,2)",32,0,39,0
 1647               		.stabs	"maxtimer:G(5,4)",32,0,40,0
 1648               		.stabs	"delay:G(5,4)",32,0,41,0
 1649               		.stabs	"posx:G(5,2)",32,0,44,0
 1650               		.stabs	"posy:G(5,2)",32,0,45,0
 1651               		.stabs	"dirx:G(5,2)",32,0,46,0
 1652               		.stabs	"diry:G(5,2)",32,0,47,0
 1653               		.stabs	"wallbrightness:G(5,4)",32,0,48,0
 1654               		.stabs	"radius:G(5,2)",32,0,51,0
 1655               		.stabs	"sinecounter:G(5,2)",32,0,54,0
 1656               		.stabs	"smileymap:G(0,21)=ar(0,18);0;7;(5,2)",32,0,57,0
 1657               		.stabs	"sinemap:G(0,22)=ar(0,18);0;7;(5,6)",32,0,69,0
 1658               		.stabs	"sinecirclemap:G(0,23)=ar(0,18);0;10;(0,21)",32,0,81,0
 1659               		.text
 1660               		.stabs	"",100,0,0,.Letext0
 1661               	.Letext0:
 1662               		.ident	"GCC: (GNU) 4.7.0"
 1663               	.global __do_copy_data
 1664               	.global __do_clear_bss
GAS LISTING /tmp/ccwyvPfy.s 			page 41


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
     /tmp/ccwyvPfy.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccwyvPfy.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccwyvPfy.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccwyvPfy.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccwyvPfy.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccwyvPfy.s:89     .text:0000000000000000 erase_screen
                            *COM*:0000000000000080 matrix
     /tmp/ccwyvPfy.s:138    .text:0000000000000030 copy_image
     /tmp/ccwyvPfy.s:231    .text:000000000000009c draw_circle
     /tmp/ccwyvPfy.s:1493   .data:0000000000000000 sinecirclemap
     /tmp/ccwyvPfy.s:361    .text:0000000000000148 draw_outline
                            *COM*:0000000000000002 wallbrightness
     /tmp/ccwyvPfy.s:446    .text:00000000000001a0 update_sinecircle
                            *COM*:0000000000000001 radius
     /tmp/ccwyvPfy.s:483    .text:00000000000001c2 update_sine
                            *COM*:0000000000000001 sinecounter
     /tmp/ccwyvPfy.s:1585   .data:0000000000000058 sinemap
     /tmp/ccwyvPfy.s:643    .text:00000000000002a8 update_smiley
     /tmp/ccwyvPfy.s:1621   .data:0000000000000078 smileymap
     /tmp/ccwyvPfy.s:666    .text:00000000000002b6 update_bouncer
                            *COM*:0000000000000001 dirx
                            *COM*:0000000000000001 posx
                            *COM*:0000000000000001 diry
                            *COM*:0000000000000001 posy
     /tmp/ccwyvPfy.s:783    .text:000000000000033c configure_sine
                            *COM*:0000000000000002 maxtimer
     /tmp/ccwyvPfy.s:830    .text:0000000000000362 configure_sinecircle
     /tmp/ccwyvPfy.s:877    .text:0000000000000388 configure_timer0
     /tmp/ccwyvPfy.s:936    .text:00000000000003aa configure_timer1
     /tmp/ccwyvPfy.s:1000   .text:00000000000003e0 setup
                            *COM*:0000000000000001 state
                            *COM*:0000000000000002 statetimer
                            *COM*:0000000000000002 delay
     /tmp/ccwyvPfy.s:1065   .text:0000000000000424 __vector_14
     /tmp/ccwyvPfy.s:1125   .text:0000000000000476 __vector_11
     /tmp/ccwyvPfy.s:1282   .text.startup:0000000000000000 main
                            *COM*:0000000000000001 inttimer

UNDEFINED SYMBOLS
__divmodhi4
__do_copy_data
__do_clear_bss
